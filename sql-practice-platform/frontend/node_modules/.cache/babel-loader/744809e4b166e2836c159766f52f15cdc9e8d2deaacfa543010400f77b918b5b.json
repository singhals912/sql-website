{"ast":null,"code":"import _objectSpread from\"/Users/ss/Downloads/Code/Vibe_coding/SQL_practice_website/sql-practice-platform/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useMemo}from'react';import{useParams,useNavigate,Navigate,useLocation}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import ProgressService from'../services/progressService';import SmartHintsPanel from'../components/SmartHintsPanel';import BookmarkButton from'../components/BookmarkButton';import EnhancedErrorDisplay from'../components/EnhancedErrorDisplay';import SQLHighlightEditor from'../components/SQLHighlightEditor';import SQLHighlightDisplay from'../components/SQLHighlightDisplay';import{sqlUrl,apiUrl,learningPathsUrl}from'../config/environment';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function PracticePage(){var _problem$difficulty,_problem$difficulty2;const{problemId}=useParams();const navigate=useNavigate();const location=useLocation();const{token}=useAuth();const[sqlQuery,setSqlQuery]=useState('-- Write your SQL query here\\n');const[selectedDialect,setSelectedDialect]=useState('postgresql');const[isExecuting,setIsExecuting]=useState(false);const[results,setResults]=useState(null);const[error,setError]=useState(null);const[problem,setProblem]=useState(null);const[schema,setSchema]=useState(null);const[showSolution,setShowSolution]=useState(false);const[allProblems,setAllProblems]=useState([]);const[showProblemsList,setShowProblemsList]=useState(false);const[currentProblemIndex,setCurrentProblemIndex]=useState(0);const[attemptCount,setAttemptCount]=useState(0);const[showHints,setShowHints]=useState(false);const[learningPathContext,setLearningPathContext]=useState(null);const[pathPosition,setPathPosition]=useState(null);const[errorAnalysis,setErrorAnalysis]=useState(null);const[expandedSection,setExpandedSection]=useState(null);// 'schema' or 'expected' or null\nconst[activeTab,setActiveTab]=useState('description');// 'description', 'editorial', 'solutions'\n// Load cached query from localStorage when problem changes\nuseEffect(()=>{if(problemId){const cachedQuery=localStorage.getItem(\"sql_query_\".concat(problemId));console.log('DEBUG: Loading cached query for problem',problemId,':',cachedQuery?cachedQuery.substring(0,50)+'...':'not found');// Clean up problematic cached queries\nif(cachedQuery&&cachedQuery.includes('SELECT * FROM customers;')){console.log('DEBUG: Removing problematic cached query');localStorage.removeItem(\"sql_query_\".concat(problemId));setSqlQuery('-- Write your SQL query here\\n');}else if(cachedQuery&&cachedQuery!=='-- Write your SQL query here\\n'&&cachedQuery.trim()!==''){setSqlQuery(cachedQuery);}else{setSqlQuery('-- Write your SQL query here\\n');}}},[problemId]);// Save query to localStorage whenever it changes\nuseEffect(()=>{if(problemId&&sqlQuery&&sqlQuery!=='-- Write your SQL query here\\n'&&sqlQuery.trim()!==''){const timeoutId=setTimeout(()=>{console.log('DEBUG: Saving query to localStorage for problem',problemId,sqlQuery.substring(0,50)+'...');localStorage.setItem(\"sql_query_\".concat(problemId),sqlQuery);},500);// Debounce saving for 500ms\nreturn()=>clearTimeout(timeoutId);}},[sqlQuery,problemId]);// Define callback functions first (before useEffect that uses them)\nconst setupProblemEnvironment=async id=>{try{await fetch(sqlUrl(\"problems/\".concat(id,\"/setup\")),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({dialect:selectedDialect})});}catch(error){console.error('Failed to setup problem environment:',error);}};const loadProblem=useCallback(async id=>{console.log('ðŸ” LOADING PROBLEM:',id,'URL:',sqlUrl(\"problems/\".concat(id)));try{const response=await fetch(sqlUrl(\"problems/\".concat(id)));console.log('ðŸ“¡ PROBLEM API Response:',response.status,response.statusText);const data=await response.json();console.log('ðŸ“Š PROBLEM API Data:',data);if(response.ok){var _data$problem,_data$problem2,_data$problem3;console.log('DEBUG: Successfully loaded problem data:',data);console.log('DEBUG: Problem object exists:',!!data.problem);console.log('DEBUG: Problem title:',(_data$problem=data.problem)===null||_data$problem===void 0?void 0:_data$problem.title);console.log('DEBUG: Problem numeric_id:',(_data$problem2=data.problem)===null||_data$problem2===void 0?void 0:_data$problem2.numeric_id);console.log('DEBUG: Full problem object:',JSON.stringify(data.problem));setProblem(data.problem);// Process schema and parse JSON strings\nlet processedSchema=data.schema||((_data$problem3=data.problem)===null||_data$problem3===void 0?void 0:_data$problem3.schema);if(processedSchema&&processedSchema.expected_output){try{// Parse expected_output if it's a string\nif(typeof processedSchema.expected_output==='string'){processedSchema.expected_output=JSON.parse(processedSchema.expected_output);}}catch(error){console.error('Failed to parse expected_output:',error);processedSchema.expected_output=[];}}setSchema(processedSchema);// Don't reset sqlQuery here - let the caching useEffect handle it\nsetShowSolution(false);// Reset solution visibility\n// Clear results and errors when loading a new problem\nsetResults(null);setError(null);// Reset attempt count for new problem\nsetAttemptCount(0);setShowHints(false);// Setup problem environment\nawait setupProblemEnvironment(id);}else{console.error('DEBUG: API response not ok:',response.status,response.statusText);console.error('DEBUG: Response data:',data);}}catch(error){console.error('DEBUG: Failed to load problem:',error);console.error('DEBUG: Error details:',error.message,error.stack);// Fallback to mock data for problem 5 when API fails\nif(id==='5'){console.log('DEBUG: Using fallback mock data for problem 5');const mockProblem={id:5,numeric_id:5,title:\"Adobe Creative Cloud Subscription Analytics\",description:\"Adobe Creative Cloud wants to identify their most valuable customers for targeted marketing campaigns and loyalty programs. As a data analyst, you need to analyze customer subscription and purchase data to determine which customers have spent the most money overall.\\n\\n**Business Context:**\\nAdobe Creative Cloud offers various subscription plans and additional purchases. The company wants to:\\n- Identify top-spending customers for premium support\\n- Create personalized offers for high-value customers  \\n- Understand customer purchasing patterns\\n- Calculate customer lifetime value metrics\\n\\n**Your Task:**\\nWrite a SQL query that analyzes the customer and order data to find customers who have made the highest total purchases. Your query should:\\n\\n1. Join the customers and orders tables\\n2. Only include completed orders (status = 'completed')\\n3. Calculate the total number of orders per customer\\n4. Calculate the total amount spent per customer\\n5. Display results ordered by total spending (highest first)\\n6. Include customer name, order count, and total spent\\n\\n**Expected Columns:**\\n- customer_name: The customer's full name\\n- order_count: Total number of completed orders\\n- total_spent: Total amount spent across all orders\",difficulty:\"Easy\",category_name:\"Data Analysis\",slug:\"adobe-creative-cloud-subscription-analytics\"};const mockSchema={id:1,problem_id:5,schema_name:\"ecommerce\",setup_sql:\"CREATE TABLE customers (customer_id SERIAL PRIMARY KEY, name VARCHAR(100), email VARCHAR(100), registration_date DATE); CREATE TABLE orders (order_id SERIAL PRIMARY KEY, customer_id INTEGER REFERENCES customers(customer_id), total_amount DECIMAL(10,2), status VARCHAR(50), order_date DATE);\",sample_data:\"INSERT INTO customers VALUES (1, 'John Smith', 'john.smith@gmail.com', '2023-01-15'), (2, 'Jane Doe', 'jane.doe@company.com', '2023-02-01'), (3, 'Mike Wilson', 'mike.w@design.co', '2023-01-20'), (4, 'Sarah Johnson', 'sarah@freelancer.com', '2023-03-10'); INSERT INTO orders VALUES (1, 1, 199.99, 'completed', '2024-01-05'), (2, 1, 189.99, 'completed', '2024-02-15'), (3, 2, 149.99, 'completed', '2024-01-12'), (4, 2, 199.50, 'completed', '2024-03-08'), (5, 3, 99.99, 'completed', '2024-01-25'), (6, 3, 79.99, 'pending', '2024-03-20'), (7, 4, 249.99, 'completed', '2024-02-10'), (8, 1, 49.99, 'cancelled', '2024-03-01');\",solution_sql:\"SELECT c.name as customer_name, COUNT(o.order_id) as order_count, SUM(o.total_amount) as total_spent FROM customers c JOIN orders o ON c.customer_id = o.customer_id WHERE o.status = 'completed' GROUP BY c.customer_id, c.name ORDER BY total_spent DESC;\"};setProblem(mockProblem);setSchema(mockSchema);setShowSolution(false);setResults(null);setError(null);setAttemptCount(0);setShowHints(false);console.log('DEBUG: Mock problem loaded successfully');}}},[selectedDialect]);const checkLearningPathContext=useCallback(async problemId=>{try{// Check if learning path is specified in URL parameters\nconst searchParams=new URLSearchParams(location.search);const learningPathId=searchParams.get('learningPath');if(learningPathId){// User came from a specific learning path, use that context\nconst positionResponse=await fetch(learningPathsUrl(\"\".concat(learningPathId,\"/position/\").concat(problemId)));const positionData=await positionResponse.json();if(positionResponse.ok){setLearningPathContext({learning_path_id:learningPathId,learning_path_name:'Learning Path'});setPathPosition(positionData.position);return;}}// Fallback: check if problem belongs to any learning paths\nconst response=await fetch(apiUrl(\"problems/\".concat(problemId,\"/learning-paths\")));const data=await response.json();if(response.ok&&data.learningPaths&&data.learningPaths.length>0){// Set the first learning path as context\nconst primaryPath=data.learningPaths[0];setLearningPathContext(primaryPath);// Get position information for this problem in the learning path\nconst positionResponse=await fetch(learningPathsUrl(\"\".concat(primaryPath.learning_path_id,\"/position/\").concat(problemId)));const positionData=await positionResponse.json();if(positionResponse.ok){setPathPosition(positionData.position);}}else{setLearningPathContext(null);setPathPosition(null);}}catch(error){console.error('Failed to check learning path context:',error);setLearningPathContext(null);setPathPosition(null);}},[location.search]);// Load all problems and current problem\nuseEffect(()=>{const initialize=async()=>{// Initialize session first\ntry{console.log('DEBUG PracticePage: Initializing session');await ProgressService.initializeSession();console.log('DEBUG PracticePage: Session initialized with ID:',ProgressService.sessionId);}catch(error){console.error('Failed to initialize session in PracticePage:',error);}// Then load problems and current problem\nloadAllProblems();if(problemId){loadProblem(problemId);checkLearningPathContext(problemId);}else{// Set up default environment\nsetupDefaultEnvironment();}};initialize();},[problemId,location.search,loadProblem,checkLearningPathContext]);// Update current problem index when problem changes\nuseEffect(()=>{if(problemId&&allProblems&&allProblems.length>0){const index=allProblems.findIndex(p=>p.id===problemId||p.slug===problemId||p.numeric_id===parseInt(problemId));if(index!==-1){setCurrentProblemIndex(index);}}},[problemId,allProblems]);const loadAllProblems=async()=>{try{// Check if we're in a learning path context\nconst searchParams=new URLSearchParams(location.search);const learningPathId=searchParams.get('learningPath');if(learningPathId){// Load problems specific to this learning path\nconst response=await fetch(learningPathsUrl(\"\".concat(learningPathId)));const data=await response.json();if(response.ok&&data.problems){// Sort by step order for learning paths\nconst sortedProblems=data.problems.sort((a,b)=>(a.stepOrder||0)-(b.stepOrder||0)).map(problem=>_objectSpread(_objectSpread({},problem),{},{// Ensure compatibility with existing problem structure\nid:problem.id,numeric_id:problem.numeric_id,title:problem.title,difficulty:problem.difficulty,slug:problem.slug}));setAllProblems(sortedProblems);console.log(\"Loaded \".concat(sortedProblems.length,\" problems for learning path\"));}else{console.error('Learning path problems not found:',data);setAllProblems([]);}}else{// Load all problems (default behavior)\nconst response=await fetch(sqlUrl('problems'));const data=await response.json();if(response.ok&&data.problems){// Sort problems by numeric_id for sequential ordering\nconst sortedProblems=data.problems.sort((a,b)=>(a.numeric_id||0)-(b.numeric_id||0));setAllProblems(sortedProblems);}else{console.error('Problems data not found in response:',data);setAllProblems([]);}}}catch(error){console.error('Failed to load problems list:',error);setAllProblems([]);}};const navigateToProblem=problemId=>{// Preserve learning path context in URL if it exists\nconst searchParams=new URLSearchParams(location.search);const learningPathId=searchParams.get('learningPath');const url=learningPathId?\"/practice/\".concat(problemId,\"?learningPath=\").concat(learningPathId):\"/practice/\".concat(problemId);navigate(url);setShowProblemsList(false);// Clear results and errors when navigating to a new problem\nsetResults(null);setError(null);// Scroll to top when navigating to new problem\nwindow.scrollTo({top:0,behavior:'smooth'});};const navigateToNextProblem=useCallback(async()=>{// If in learning path context, use learning path navigation\nif(learningPathContext&&pathPosition){try{const response=await fetch(learningPathsUrl(\"\".concat(learningPathContext.learning_path_id,\"/next/\").concat(problemId)));const data=await response.json();if(response.ok&&data.nextProblem){navigateToProblem(data.nextProblem.problem_numeric_id);}else if(data.message){// Show completion message for learning path\nalert(data.message);}return;}catch(error){console.error('Failed to get next problem in path:',error);// Fall through to regular navigation\n}}// Regular navigation (not in learning path or API failed)\nif(allProblems&&allProblems.length>0&&currentProblemIndex<allProblems.length-1){const nextProblem=allProblems[currentProblemIndex+1];if(nextProblem){navigateToProblem(nextProblem.numeric_id);}}},[learningPathContext,pathPosition,problemId,allProblems,currentProblemIndex]);const navigateToPreviousProblem=useCallback(async()=>{// If in learning path context, use learning path navigation\nif(learningPathContext&&pathPosition&&pathPosition.has_previous){const prevProblem=pathPosition.previous_problem;if(prevProblem){navigateToProblem(prevProblem.problem_numeric_id);return;}}// Regular navigation (not in learning path or no previous in path)\nif(currentProblemIndex>0){const prevProblem=allProblems[currentProblemIndex-1];navigateToProblem(prevProblem.numeric_id);}},[learningPathContext,pathPosition,currentProblemIndex,allProblems]);const getDifficultyColor=difficulty=>{switch(difficulty===null||difficulty===void 0?void 0:difficulty.toLowerCase()){case'easy':return'text-green-600 bg-green-100';case'medium':return'text-yellow-600 bg-yellow-100';case'hard':return'text-red-600 bg-red-100';default:return'text-gray-600 bg-gray-100';}};// Memoize the expensive schema parsing to prevent re-computation on every render\nconst parsedSchema=useMemo(()=>{if(!(schema!==null&&schema!==void 0&&schema.setup_sql))return{tables:[],sampleData:{}};const createTableRegex=/CREATE TABLE (\\w+) \\(([\\s\\S]*?)\\);/g;const tables=[];const sampleData={};let match;// Parse table structures\nwhile((match=createTableRegex.exec(schema.setup_sql))!==null){const tableName=match[1];const columnsText=match[2];const parseColumns=columnsText=>{const columns=[];let current='';let parenDepth=0;for(let i=0;i<columnsText.length;i++){const char=columnsText[i];if(char==='(')parenDepth++;if(char===')')parenDepth--;if(char===','&&parenDepth===0){if(current.trim())columns.push(current.trim());current='';}else{current+=char;}}if(current.trim())columns.push(current.trim());return columns;};const columns=parseColumns(columnsText).filter(col=>col.length>0).map(col=>{const parts=col.split(' ');const name=parts[0];const type=parts.slice(1).join(' ').toUpperCase();return{name,type};});tables.push({name:tableName,columns});}// Parse sample data\nconst insertMatches=[...schema.setup_sql.matchAll(/INSERT\\s+INTO\\s+(\\w+)(?:\\s*\\([^)]+\\))?\\s+VALUES\\s+([\\s\\S]*?);/gi)];insertMatches.forEach(match=>{const tableName=match[1];const valuesText=match[2];const rowMatches=[...valuesText.matchAll(/\\(([\\s\\S]*?)\\)/g)];sampleData[tableName]=rowMatches.slice(0,3).map(rowMatch=>{return rowMatch[1].split(',').map(val=>{const trimmed=val.trim();if(trimmed==='NULL')return'NULL';return trimmed.replace(/^'|'$/g,'').replace(/''/g,\"'\");});});});return{tables,sampleData};},[schema===null||schema===void 0?void 0:schema.setup_sql]);// Memoize the processed problem description to prevent re-processing\nconst processedDescription=useMemo(()=>{if(!(problem!==null&&problem!==void 0&&problem.description))return'';return problem.description.replace(/\\*\\*Expected Output:\\*\\*.*?(?=\\*\\*|$)/g,'').replace(/Expected Output:.*?(?=\\n\\n|\\n\\*\\*|$)/g,'').replace(/\\*\\*Business Context:\\*\\*/g,'<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Business Context</h4>').replace(/\\*\\*Scenario:\\*\\*/g,'<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Scenario</h4>').replace(/\\*\\*Problem:\\*\\*/g,'<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Problem</h4>').replace(/Business Context:/g,'<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Business Context</h4>').replace(/Scenario:/g,'<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Scenario</h4>').replace(/Problem:/g,'<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Problem</h4>').replace(/\\*\\*(.*?)\\*\\*/g,'<strong class=\"text-gray-900 dark:text-white\">$1</strong>').replace(/`(.*?)`/g,'<code class=\"bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded text-sm\">$1</code>').replace(/```sql\\n([\\s\\S]*?)\\n```/g,'<pre class=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto mt-4 mb-4\"><code class=\"text-sm text-gray-900 dark:text-gray-100\">$1</code></pre>').replace(/\\n/g,'<br>').replace(/<br><br>/g,'<br>');},[problem===null||problem===void 0?void 0:problem.description]);const setupDefaultEnvironment=async()=>{// Default environment is set up automatically by the backend\nconsole.log('Using default practice environment');};const executeQuery=async()=>{if(!sqlQuery.trim()){setError('Please enter a SQL query');return;}setIsExecuting(true);setError(null);setResults(null);// Clear previous results\n// Increment attempt count\nconst newAttemptCount=attemptCount+1;setAttemptCount(newAttemptCount);try{console.log('DEBUG: Executing query with session ID:',ProgressService.sessionId,'for problem:',problemId);// Create AbortController for timeout\nconst controller=new AbortController();const timeoutId=setTimeout(()=>controller.abort(),30000);// 30 second timeout\nconst requestBody={query:sqlQuery,dialect:selectedDialect,problemId:(problem===null||problem===void 0?void 0:problem.numeric_id)||parseInt(problemId)// Use numeric ID for validation\n};console.log('ðŸ“¤ Request URL:',sqlUrl('execute'));console.log('ðŸ“¤ Request body:',requestBody);console.log('ðŸ“¤ SQL Query preview:',sqlQuery.substring(0,100)+'...');const response=await fetch(sqlUrl('execute'),{method:'POST',signal:controller.signal,headers:_objectSpread({'Content-Type':'application/json','X-Session-ID':ProgressService.sessionId},token&&{'Authorization':\"Bearer \".concat(token)}),body:JSON.stringify(requestBody)});clearTimeout(timeoutId);console.log('ðŸ“¥ Response status:',response.status);console.log('ðŸ“¥ Response headers:',Object.fromEntries(response.headers.entries()));if(!response.ok){// Get the error message from the response\nlet errorMessage=\"HTTP error! status: \".concat(response.status);try{const errorData=await response.json();console.error('âŒ API Error Response:',errorData);errorMessage=errorData.message||errorData.error||errorMessage;}catch(parseError){console.error('âŒ Failed to parse error response:',parseError);}throw new Error(errorMessage);}const data=await response.json();console.log('DEBUG: Response data:',data);if(data.success){var _data$validation,_data$validation2,_data$validation3,_data$validation4;// Use new backend response format\nsetResults({rows:data.results||[],rowCount:data.rowCount||0,validation:data.validation,isCorrect:((_data$validation=data.validation)===null||_data$validation===void 0?void 0:_data$validation.correct)||false});// Show validation message\nif(data.validation&&data.validation.message){console.log('ðŸ“‹ Validation Result:',data.validation.message);}setError(null);setErrorAnalysis(null);// Clear progress cache to ensure fresh data\nProgressService.clearCache();console.log('DEBUG: Query completed with validation:',{sessionId:ProgressService.sessionId,problemId:(problem===null||problem===void 0?void 0:problem.numeric_id)||problemId,isCorrect:((_data$validation2=data.validation)===null||_data$validation2===void 0?void 0:_data$validation2.correct)||false,message:(_data$validation3=data.validation)===null||_data$validation3===void 0?void 0:_data$validation3.message});// Emit progress update event if problem was solved correctly\nif((_data$validation4=data.validation)!==null&&_data$validation4!==void 0&&_data$validation4.correct){console.log('ðŸŽ‰ Problem solved correctly! Emitting progressUpdated event...');window.dispatchEvent(new CustomEvent('progressUpdated',{detail:{problemId,solved:true}}));console.log('âœ… progressUpdated event emitted');}}else{console.log('DEBUG: Setting error:',data.error);setError(data.error);setErrorAnalysis(data.errorAnalysis||null);setResults(null);// Clear results on error\nconsole.log('DEBUG: Error state should now be set');// Note: Progress tracking for failed attempts is handled by the backend in execute.js\n}}catch(err){console.error('DEBUG: Query execution error:',err);if(err.name==='AbortError'){setError('Query timed out after 30 seconds. Please try a simpler query.');}else{setError(\"Failed to execute query: \".concat(err.message));}setErrorAnalysis(null);setResults(null);// Clear results on network error\n}finally{setIsExecuting(false);}};// Close problems list when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(!event.target.closest('.relative')){setShowProblemsList(false);}};if(showProblemsList){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[showProblemsList]);// Debug: Track error state changes\nuseEffect(()=>{console.log('DEBUG: Error state changed to:',error);},[error]);// Add keyboard shortcuts\nuseEffect(()=>{const handleKeyPress=event=>{// Only trigger shortcuts when not typing in textarea or input\nif(event.target.tagName==='TEXTAREA'||event.target.tagName==='INPUT'){return;}if(event.key==='ArrowLeft'&&event.ctrlKey){event.preventDefault();navigateToPreviousProblem();}else if(event.key==='ArrowRight'&&event.ctrlKey){event.preventDefault();navigateToNextProblem();}else if(event.key==='p'&&event.ctrlKey){event.preventDefault();setShowProblemsList(!showProblemsList);}};document.addEventListener('keydown',handleKeyPress);return()=>{document.removeEventListener('keydown',handleKeyPress);};},[currentProblemIndex,allProblems===null||allProblems===void 0?void 0:allProblems.length,showProblemsList,navigateToNextProblem,navigateToPreviousProblem]);// If no problem is selected, redirect to problems page\nif(!problemId){return/*#__PURE__*/_jsx(Navigate,{to:\"/problems\",replace:true});}// Debug loading state\nif(!problem){console.log('ðŸ” PROBLEM PAGE: No problem data loaded yet, problemId:',problemId);return/*#__PURE__*/_jsx(\"div\",{className:\"h-screen flex items-center justify-center bg-white dark:bg-gray-900\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:[\"Loading problem \",problemId,\"...\"]})]})});}// Problem mode - show the full problem-solving interface\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen flex flex-col bg-white dark:bg-gray-900\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\",children:/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/problems'),className:\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})})}),problem&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-lg font-medium text-gray-900 dark:text-white\",children:[console.log('DEBUG RENDER: problem object:',problem)||'',console.log('DEBUG RENDER: numeric_id:',problem.numeric_id,'title:',problem.title)||'',problem.numeric_id||'No ID',\". \",problem.title||'No Title']}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(problem.difficulty==='easy'?'bg-green-100 text-green-800':problem.difficulty==='medium'?'bg-yellow-100 text-yellow-800':'bg-red-100 text-red-800'),children:((_problem$difficulty=problem.difficulty)===null||_problem$difficulty===void 0?void 0:_problem$difficulty.charAt(0).toUpperCase())+((_problem$difficulty2=problem.difficulty)===null||_problem$difficulty2===void 0?void 0:_problem$difficulty2.slice(1))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(BookmarkButton,{problemId:problem===null||problem===void 0?void 0:problem.id,size:\"sm\"}),/*#__PURE__*/_jsx(\"button\",{onClick:navigateToPreviousProblem,disabled:currentProblemIndex===0,className:\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 disabled:opacity-50\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowProblemsList(!showProblemsList),className:\"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white border border-gray-300 dark:border-gray-600 rounded\",children:[currentProblemIndex+1,\" / \",(allProblems===null||allProblems===void 0?void 0:allProblems.length)||0]}),/*#__PURE__*/_jsx(\"button\",{onClick:navigateToNextProblem,disabled:currentProblemIndex===((allProblems===null||allProblems===void 0?void 0:allProblems.length)||0)-1,className:\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 disabled:opacity-50\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5l7 7-7 7\"})})})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/2 border-r border-gray-200 dark:border-gray-700 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex px-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('description'),className:\"px-4 py-3 text-sm font-medium transition-colors \".concat(activeTab==='description'?'text-blue-600 border-b-2 border-blue-600':'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'),children:\"Description\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('editorial'),className:\"px-4 py-3 text-sm font-medium transition-colors \".concat(activeTab==='editorial'?'text-blue-600 border-b-2 border-blue-600':'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'),children:\"Editorial\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('solutions'),className:\"px-4 py-3 text-sm font-medium transition-colors \".concat(activeTab==='solutions'?'text-blue-600 border-b-2 border-blue-600':'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'),children:\"Solutions\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-4\",children:problem&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[activeTab==='description'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"prose prose-sm max-w-none text-gray-700 dark:text-gray-300\",children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:processedDescription}})}),parsedSchema.tables.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-gray-900 dark:text-white font-semibold mb-4\",children:\"Database Schema\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:parsedSchema.tables.map(table=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 dark:border-gray-700 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsx(\"span\",{className:\"font-mono text-sm font-semibold text-gray-900 dark:text-white\",children:table.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-100 dark:divide-gray-700\",children:table.columns.map(col=>/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-2 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-mono text-sm text-gray-700 dark:text-gray-300\",children:col.name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\",children:col.type})]},col.name))}),parsedSchema.sampleData[table.name]&&parsedSchema.sampleData[table.name].length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 dark:border-gray-700 p-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 uppercase tracking-wider\",children:\"Sample Data\"}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-xs\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{className:\"bg-gray-50 dark:bg-gray-800\",children:table.columns.map(col=>/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left font-medium text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-600\",children:col.name},col.name))})}),/*#__PURE__*/_jsx(\"tbody\",{children:parsedSchema.sampleData[table.name].map((row,idx)=>/*#__PURE__*/_jsx(\"tr\",{className:\"bg-white dark:bg-gray-900\",children:row.map((cell,cellIdx)=>/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600\",children:cell},cellIdx))},idx))})]})})]})]},table.name))})]}),schema&&schema.expected_output&&Array.isArray(schema.expected_output)&&schema.expected_output.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-gray-900 dark:text-white font-semibold mb-4\",children:\"Expected Output\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 dark:bg-gray-800\",children:/*#__PURE__*/_jsx(\"tr\",{children:schema.expected_output[0]?Object.keys(schema.expected_output[0]).map(column=>/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\",children:column},column)):null})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700\",children:schema.expected_output.slice(0,5).map((row,idx)=>/*#__PURE__*/_jsx(\"tr\",{children:Object.values(row).map((cell,cellIdx)=>/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100\",children:cell!==null?cell.toString():'NULL'},cellIdx))},idx))})]})}),schema.expected_output.length>5&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 dark:bg-gray-800 px-4 py-2 text-xs text-gray-500 dark:text-gray-400 text-center\",children:[\"Showing 5 of \",schema.expected_output.length,\" rows\"]})]})]})]}),activeTab==='editorial'&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83D\\uDCDA\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white mb-2\",children:\"Editorial Coming Soon\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Detailed explanations and approaches for this problem will be available soon.\"})]}),activeTab==='solutions'&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:schema&&schema.solution_sql?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-gray-900 dark:text-white font-semibold\",children:\"Official Solution\"}),/*#__PURE__*/_jsx(\"button\",{onClick:async event=>{try{if(navigator.clipboard&&navigator.clipboard.writeText){await navigator.clipboard.writeText(schema.solution_sql);// Show success feedback\nconst button=event.target;const originalText=button.textContent;button.textContent='Copied!';button.className='px-3 py-1.5 bg-green-600 text-white text-sm rounded transition-colors';setTimeout(()=>{button.textContent=originalText;button.className='px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors';},2000);}else{// Fallback for older browsers\nconst textArea=document.createElement('textarea');textArea.value=schema.solution_sql;textArea.style.position='fixed';textArea.style.opacity='0';document.body.appendChild(textArea);textArea.select();document.execCommand('copy');document.body.removeChild(textArea);// Show success feedback\nconst button=event.target;const originalText=button.textContent;button.textContent='Copied!';button.className='px-3 py-1.5 bg-green-600 text-white text-sm rounded transition-colors';setTimeout(()=>{button.textContent=originalText;button.className='px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors';},2000);}}catch(error){console.error('Failed to copy solution:',error);// Show error feedback\nconst button=event.target;const originalText=button.textContent;button.textContent='Copy Failed!';button.className='px-3 py-1.5 bg-red-600 text-white text-sm rounded transition-colors';setTimeout(()=>{button.textContent=originalText;button.className='px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors';},2000);}},className:\"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors\",children:\"Copy Solution\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"text-sm text-gray-900 dark:text-gray-100 overflow-x-auto\",children:/*#__PURE__*/_jsx(\"code\",{children:schema.solution_sql})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/50 border border-blue-200 dark:border-blue-800 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-medium text-blue-900 dark:text-blue-300 mb-2\",children:\"Approach\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800 dark:text-blue-300\",children:\"This solution demonstrates the optimal approach to solving this problem. Study the query structure and try to understand the logic before looking at the code.\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-6xl mb-4\",children:\"\\uD83D\\uDD10\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white mb-2\",children:\"Solution Locked\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Complete this problem to unlock the official solution.\"})]})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/2 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 dark:border-gray-700 px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"SQL\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedDialect,onChange:e=>setSelectedDialect(e.target.value),className:\"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800 text-gray-900 dark:text-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"postgresql\",children:\"PostgreSQL\"}),/*#__PURE__*/_jsx(\"option\",{value:\"mysql\",children:\"MySQL\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:executeQuery,disabled:isExecuting,className:\"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white text-sm font-medium rounded-md transition-colors\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 inline mr-2\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z\",clipRule:\"evenodd\"})}),\"Run\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:executeQuery,disabled:isExecuting||!sqlQuery.trim(),className:\"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white text-sm font-medium rounded-md transition-colors\",children:\"Submit\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-80 border-b border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsx(SQLHighlightEditor,{value:sqlQuery,onChange:setSqlQuery,onExecute:executeQuery,isExecuting:isExecuting,height:\"100%\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-4 bg-gray-50 dark:bg-gray-900\",children:[isExecuting&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:\"Running...\"})]})}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 rounded text-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-red-800 dark:text-red-300 mb-1\",children:\"Error\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-700 dark:text-red-400\",children:error})]}),results&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[results.isCorrect!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 rounded border \".concat(results.isCorrect?'bg-green-50 dark:bg-green-900/50 border-green-200 dark:border-green-800 text-green-800 dark:text-green-300':'bg-red-50 dark:bg-red-900/50 border-red-200 dark:border-red-800 text-red-800 dark:text-red-300'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:results.isCorrect?'âœ“':'âœ—'}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:results.isCorrect?'Accepted':'Wrong Answer'})]}),results.feedback&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm mt-1\",children:results.feedback})]}),results&&results.validation&&results.validation.message&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 rounded-lg border \".concat(results.validation.correct?'bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400':'bg-yellow-50 border-yellow-200 text-yellow-800 dark:bg-yellow-900/20 dark:border-yellow-800 dark:text-yellow-400'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:results.validation.correct?/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-green-600 dark:text-green-400\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",clipRule:\"evenodd\"})}):/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-yellow-600 dark:text-yellow-400\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium\",children:results.validation.message})})]})}),results&&results.rows&&results.rows.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-400 mb-2\",children:[results.rows.length,\" rows \\u2022 \",results.executionTime]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 dark:border-gray-700 rounded max-h-80 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 dark:bg-gray-800 sticky top-0\",children:/*#__PURE__*/_jsx(\"tr\",{children:Object.keys(results.rows[0]).map(column=>/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\",children:column},column))})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700\",children:results.rows.map((row,idx)=>/*#__PURE__*/_jsx(\"tr\",{children:Object.values(row).map((cell,cellIdx)=>/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100\",children:cell!==null?cell.toString():/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"NULL\"})},cellIdx))},idx))})]}),results.rows.length>10&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 dark:bg-gray-800 px-4 py-2 text-xs text-gray-500 dark:text-gray-400 text-center border-t border-gray-200 dark:border-gray-700\",children:[\"Showing all \",results.rows.length,\" rows \\u2022 Scroll to see more\"]})]})]}),results.rows&&results.rows.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500 dark:text-gray-400\",children:\"Query executed successfully but returned no rows\"})]}),!results&&!error&&!isExecuting&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500 dark:text-gray-400\",children:\"Run your code to see results here\"})]})]})]})]}),showProblemsList&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-16 right-4 w-80 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-2\",children:allProblems===null||allProblems===void 0?void 0:allProblems.map((prob,index)=>{var _prob$difficulty;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>{navigateToProblem(prob.numeric_id);setShowProblemsList(false);},className:\"w-full text-left px-3 py-2 rounded text-sm transition-colors \".concat(prob.numeric_id===(problem===null||problem===void 0?void 0:problem.numeric_id)?'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300':'hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[prob.numeric_id,\".\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate flex-1\",children:prob.title}),/*#__PURE__*/_jsx(\"span\",{className:\"px-1 py-0.5 rounded text-xs \".concat(prob.difficulty==='easy'?'bg-green-100 text-green-800':prob.difficulty==='medium'?'bg-yellow-100 text-yellow-800':'bg-red-100 text-red-800'),children:(_prob$difficulty=prob.difficulty)===null||_prob$difficulty===void 0?void 0:_prob$difficulty.charAt(0).toUpperCase()})]})},prob.id);})})})]});}export default PracticePage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","useParams","useNavigate","Navigate","useLocation","useAuth","ProgressService","SmartHintsPanel","BookmarkButton","EnhancedErrorDisplay","SQLHighlightEditor","SQLHighlightDisplay","sqlUrl","apiUrl","learningPathsUrl","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PracticePage","_problem$difficulty","_problem$difficulty2","problemId","navigate","location","token","sqlQuery","setSqlQuery","selectedDialect","setSelectedDialect","isExecuting","setIsExecuting","results","setResults","error","setError","problem","setProblem","schema","setSchema","showSolution","setShowSolution","allProblems","setAllProblems","showProblemsList","setShowProblemsList","currentProblemIndex","setCurrentProblemIndex","attemptCount","setAttemptCount","showHints","setShowHints","learningPathContext","setLearningPathContext","pathPosition","setPathPosition","errorAnalysis","setErrorAnalysis","expandedSection","setExpandedSection","activeTab","setActiveTab","cachedQuery","localStorage","getItem","concat","console","log","substring","includes","removeItem","trim","timeoutId","setTimeout","setItem","clearTimeout","setupProblemEnvironment","id","fetch","method","headers","body","JSON","stringify","dialect","loadProblem","response","status","statusText","data","json","ok","_data$problem","_data$problem2","_data$problem3","title","numeric_id","processedSchema","expected_output","parse","message","stack","mockProblem","description","difficulty","category_name","slug","mockSchema","problem_id","schema_name","setup_sql","sample_data","solution_sql","checkLearningPathContext","searchParams","URLSearchParams","search","learningPathId","get","positionResponse","positionData","learning_path_id","learning_path_name","position","learningPaths","length","primaryPath","initialize","initializeSession","sessionId","loadAllProblems","setupDefaultEnvironment","index","findIndex","p","parseInt","problems","sortedProblems","sort","a","b","stepOrder","map","_objectSpread","navigateToProblem","url","window","scrollTo","top","behavior","navigateToNextProblem","nextProblem","problem_numeric_id","alert","navigateToPreviousProblem","has_previous","prevProblem","previous_problem","getDifficultyColor","toLowerCase","parsedSchema","tables","sampleData","createTableRegex","match","exec","tableName","columnsText","parseColumns","columns","current","parenDepth","i","char","push","filter","col","parts","split","name","type","slice","join","toUpperCase","insertMatches","matchAll","forEach","valuesText","rowMatches","rowMatch","val","trimmed","replace","processedDescription","executeQuery","newAttemptCount","controller","AbortController","abort","requestBody","query","signal","Object","fromEntries","entries","errorMessage","errorData","parseError","Error","success","_data$validation","_data$validation2","_data$validation3","_data$validation4","rows","rowCount","validation","isCorrect","correct","clearCache","dispatchEvent","CustomEvent","detail","solved","err","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","handleKeyPress","tagName","key","ctrlKey","preventDefault","to","className","children","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","charAt","size","disabled","dangerouslySetInnerHTML","__html","table","row","idx","cell","cellIdx","Array","isArray","keys","column","values","toString","navigator","clipboard","writeText","button","originalText","textContent","textArea","createElement","value","style","opacity","appendChild","select","execCommand","removeChild","onChange","e","fillRule","clipRule","onExecute","height","feedback","executionTime","prob","_prob$difficulty"],"sources":["/Users/ss/Downloads/Code/Vibe_coding/SQL_practice_website/sql-practice-platform/frontend/src/pages/PracticePage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useParams, useNavigate, Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport ProgressService from '../services/progressService';\nimport SmartHintsPanel from '../components/SmartHintsPanel';\nimport BookmarkButton from '../components/BookmarkButton';\nimport EnhancedErrorDisplay from '../components/EnhancedErrorDisplay';\nimport SQLHighlightEditor from '../components/SQLHighlightEditor';\nimport SQLHighlightDisplay from '../components/SQLHighlightDisplay';\nimport { sqlUrl, apiUrl, learningPathsUrl } from '../config/environment';\n\n\nfunction PracticePage() {\n  const { problemId } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { token } = useAuth();\n  const [sqlQuery, setSqlQuery] = useState('-- Write your SQL query here\\n');\n  const [selectedDialect, setSelectedDialect] = useState('postgresql');\n  const [isExecuting, setIsExecuting] = useState(false);\n  const [results, setResults] = useState(null);\n  const [error, setError] = useState(null);\n  const [problem, setProblem] = useState(null);\n  const [schema, setSchema] = useState(null);\n  const [showSolution, setShowSolution] = useState(false);\n  const [allProblems, setAllProblems] = useState([]);\n  const [showProblemsList, setShowProblemsList] = useState(false);\n  const [currentProblemIndex, setCurrentProblemIndex] = useState(0);\n  const [attemptCount, setAttemptCount] = useState(0);\n  const [showHints, setShowHints] = useState(false);\n  const [learningPathContext, setLearningPathContext] = useState(null);\n  const [pathPosition, setPathPosition] = useState(null);\n  const [errorAnalysis, setErrorAnalysis] = useState(null);\n  const [expandedSection, setExpandedSection] = useState(null); // 'schema' or 'expected' or null\n  const [activeTab, setActiveTab] = useState('description'); // 'description', 'editorial', 'solutions'\n\n  // Load cached query from localStorage when problem changes\n  useEffect(() => {\n    if (problemId) {\n      const cachedQuery = localStorage.getItem(`sql_query_${problemId}`);\n      console.log('DEBUG: Loading cached query for problem', problemId, ':', cachedQuery ? cachedQuery.substring(0, 50) + '...' : 'not found');\n      \n      // Clean up problematic cached queries\n      if (cachedQuery && cachedQuery.includes('SELECT * FROM customers;')) {\n        console.log('DEBUG: Removing problematic cached query');\n        localStorage.removeItem(`sql_query_${problemId}`);\n        setSqlQuery('-- Write your SQL query here\\n');\n      } else if (cachedQuery && cachedQuery !== '-- Write your SQL query here\\n' && cachedQuery.trim() !== '') {\n        setSqlQuery(cachedQuery);\n      } else {\n        setSqlQuery('-- Write your SQL query here\\n');\n      }\n    }\n  }, [problemId]);\n\n  // Save query to localStorage whenever it changes\n  useEffect(() => {\n    if (problemId && sqlQuery && sqlQuery !== '-- Write your SQL query here\\n' && sqlQuery.trim() !== '') {\n      const timeoutId = setTimeout(() => {\n        console.log('DEBUG: Saving query to localStorage for problem', problemId, sqlQuery.substring(0, 50) + '...');\n        localStorage.setItem(`sql_query_${problemId}`, sqlQuery);\n      }, 500); // Debounce saving for 500ms\n      \n      return () => clearTimeout(timeoutId);\n    }\n  }, [sqlQuery, problemId]);\n\n  // Define callback functions first (before useEffect that uses them)\n  const setupProblemEnvironment = async (id) => {\n    try {\n      await fetch(sqlUrl(`problems/${id}/setup`), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ dialect: selectedDialect })\n      });\n    } catch (error) {\n      console.error('Failed to setup problem environment:', error);\n    }\n  };\n\n  const loadProblem = useCallback(async (id) => {\n    console.log('ðŸ” LOADING PROBLEM:', id, 'URL:', sqlUrl(`problems/${id}`));\n    try {\n      const response = await fetch(sqlUrl(`problems/${id}`));\n      console.log('ðŸ“¡ PROBLEM API Response:', response.status, response.statusText);\n      const data = await response.json();\n      console.log('ðŸ“Š PROBLEM API Data:', data);\n      \n      if (response.ok) {\n        console.log('DEBUG: Successfully loaded problem data:', data);\n        console.log('DEBUG: Problem object exists:', !!data.problem);\n        console.log('DEBUG: Problem title:', data.problem?.title);\n        console.log('DEBUG: Problem numeric_id:', data.problem?.numeric_id);\n        console.log('DEBUG: Full problem object:', JSON.stringify(data.problem));\n        setProblem(data.problem);\n        \n        // Process schema and parse JSON strings\n        let processedSchema = data.schema || data.problem?.schema;\n        if (processedSchema && processedSchema.expected_output) {\n          try {\n            // Parse expected_output if it's a string\n            if (typeof processedSchema.expected_output === 'string') {\n              processedSchema.expected_output = JSON.parse(processedSchema.expected_output);\n            }\n          } catch (error) {\n            console.error('Failed to parse expected_output:', error);\n            processedSchema.expected_output = [];\n          }\n        }\n        setSchema(processedSchema);\n        // Don't reset sqlQuery here - let the caching useEffect handle it\n        setShowSolution(false); // Reset solution visibility\n        // Clear results and errors when loading a new problem\n        setResults(null);\n        setError(null);\n        // Reset attempt count for new problem\n        setAttemptCount(0);\n        setShowHints(false);\n        \n        // Setup problem environment\n        await setupProblemEnvironment(id);\n      } else {\n        console.error('DEBUG: API response not ok:', response.status, response.statusText);\n        console.error('DEBUG: Response data:', data);\n      }\n    } catch (error) {\n      console.error('DEBUG: Failed to load problem:', error);\n      console.error('DEBUG: Error details:', error.message, error.stack);\n      \n      // Fallback to mock data for problem 5 when API fails\n      if (id === '5') {\n        console.log('DEBUG: Using fallback mock data for problem 5');\n        const mockProblem = {\n          id: 5,\n          numeric_id: 5,\n          title: \"Adobe Creative Cloud Subscription Analytics\",\n          description: `Adobe Creative Cloud wants to identify their most valuable customers for targeted marketing campaigns and loyalty programs. As a data analyst, you need to analyze customer subscription and purchase data to determine which customers have spent the most money overall.\n\n**Business Context:**\nAdobe Creative Cloud offers various subscription plans and additional purchases. The company wants to:\n- Identify top-spending customers for premium support\n- Create personalized offers for high-value customers  \n- Understand customer purchasing patterns\n- Calculate customer lifetime value metrics\n\n**Your Task:**\nWrite a SQL query that analyzes the customer and order data to find customers who have made the highest total purchases. Your query should:\n\n1. Join the customers and orders tables\n2. Only include completed orders (status = 'completed')\n3. Calculate the total number of orders per customer\n4. Calculate the total amount spent per customer\n5. Display results ordered by total spending (highest first)\n6. Include customer name, order count, and total spent\n\n**Expected Columns:**\n- customer_name: The customer's full name\n- order_count: Total number of completed orders\n- total_spent: Total amount spent across all orders`,\n          difficulty: \"Easy\",\n          category_name: \"Data Analysis\",\n          slug: \"adobe-creative-cloud-subscription-analytics\"\n        };\n\n        const mockSchema = {\n          id: 1,\n          problem_id: 5,\n          schema_name: \"ecommerce\",\n          setup_sql: \"CREATE TABLE customers (customer_id SERIAL PRIMARY KEY, name VARCHAR(100), email VARCHAR(100), registration_date DATE); CREATE TABLE orders (order_id SERIAL PRIMARY KEY, customer_id INTEGER REFERENCES customers(customer_id), total_amount DECIMAL(10,2), status VARCHAR(50), order_date DATE);\",\n          sample_data: \"INSERT INTO customers VALUES (1, 'John Smith', 'john.smith@gmail.com', '2023-01-15'), (2, 'Jane Doe', 'jane.doe@company.com', '2023-02-01'), (3, 'Mike Wilson', 'mike.w@design.co', '2023-01-20'), (4, 'Sarah Johnson', 'sarah@freelancer.com', '2023-03-10'); INSERT INTO orders VALUES (1, 1, 199.99, 'completed', '2024-01-05'), (2, 1, 189.99, 'completed', '2024-02-15'), (3, 2, 149.99, 'completed', '2024-01-12'), (4, 2, 199.50, 'completed', '2024-03-08'), (5, 3, 99.99, 'completed', '2024-01-25'), (6, 3, 79.99, 'pending', '2024-03-20'), (7, 4, 249.99, 'completed', '2024-02-10'), (8, 1, 49.99, 'cancelled', '2024-03-01');\",\n          solution_sql: \"SELECT c.name as customer_name, COUNT(o.order_id) as order_count, SUM(o.total_amount) as total_spent FROM customers c JOIN orders o ON c.customer_id = o.customer_id WHERE o.status = 'completed' GROUP BY c.customer_id, c.name ORDER BY total_spent DESC;\"\n        };\n\n        setProblem(mockProblem);\n        setSchema(mockSchema);\n        setShowSolution(false);\n        setResults(null);\n        setError(null);\n        setAttemptCount(0);\n        setShowHints(false);\n        \n        console.log('DEBUG: Mock problem loaded successfully');\n      }\n    }\n  }, [selectedDialect]);\n\n  const checkLearningPathContext = useCallback(async (problemId) => {\n    try {\n      // Check if learning path is specified in URL parameters\n      const searchParams = new URLSearchParams(location.search);\n      const learningPathId = searchParams.get('learningPath');\n      \n      if (learningPathId) {\n        // User came from a specific learning path, use that context\n        const positionResponse = await fetch(learningPathsUrl(`${learningPathId}/position/${problemId}`));\n        const positionData = await positionResponse.json();\n        \n        if (positionResponse.ok) {\n          setLearningPathContext({ learning_path_id: learningPathId, learning_path_name: 'Learning Path' });\n          setPathPosition(positionData.position);\n          return;\n        }\n      }\n      \n      // Fallback: check if problem belongs to any learning paths\n      const response = await fetch(apiUrl(`problems/${problemId}/learning-paths`));\n      const data = await response.json();\n      \n      if (response.ok && data.learningPaths && data.learningPaths.length > 0) {\n        // Set the first learning path as context\n        const primaryPath = data.learningPaths[0];\n        setLearningPathContext(primaryPath);\n        \n        // Get position information for this problem in the learning path\n        const positionResponse = await fetch(learningPathsUrl(`${primaryPath.learning_path_id}/position/${problemId}`));\n        const positionData = await positionResponse.json();\n        \n        if (positionResponse.ok) {\n          setPathPosition(positionData.position);\n        }\n      } else {\n        setLearningPathContext(null);\n        setPathPosition(null);\n      }\n    } catch (error) {\n      console.error('Failed to check learning path context:', error);\n      setLearningPathContext(null);\n      setPathPosition(null);\n    }\n  }, [location.search]);\n\n  // Load all problems and current problem\n  useEffect(() => {\n    const initialize = async () => {\n      // Initialize session first\n      try {\n        console.log('DEBUG PracticePage: Initializing session');\n        await ProgressService.initializeSession();\n        console.log('DEBUG PracticePage: Session initialized with ID:', ProgressService.sessionId);\n      } catch (error) {\n        console.error('Failed to initialize session in PracticePage:', error);\n      }\n      \n      // Then load problems and current problem\n      loadAllProblems();\n      if (problemId) {\n        loadProblem(problemId);\n        checkLearningPathContext(problemId);\n      } else {\n        // Set up default environment\n        setupDefaultEnvironment();\n      }\n    };\n    \n    initialize();\n  }, [problemId, location.search, loadProblem, checkLearningPathContext]);\n\n  // Update current problem index when problem changes\n  useEffect(() => {\n    if (problemId && allProblems && allProblems.length > 0) {\n      const index = allProblems.findIndex(p => \n        p.id === problemId || \n        p.slug === problemId || \n        p.numeric_id === parseInt(problemId)\n      );\n      if (index !== -1) {\n        setCurrentProblemIndex(index);\n      }\n    }\n  }, [problemId, allProblems]);\n\n  const loadAllProblems = async () => {\n    try {\n      // Check if we're in a learning path context\n      const searchParams = new URLSearchParams(location.search);\n      const learningPathId = searchParams.get('learningPath');\n      \n      if (learningPathId) {\n        // Load problems specific to this learning path\n        const response = await fetch(learningPathsUrl(`${learningPathId}`));\n        const data = await response.json();\n        if (response.ok && data.problems) {\n          // Sort by step order for learning paths\n          const sortedProblems = data.problems\n            .sort((a, b) => (a.stepOrder || 0) - (b.stepOrder || 0))\n            .map(problem => ({\n              ...problem,\n              // Ensure compatibility with existing problem structure\n              id: problem.id,\n              numeric_id: problem.numeric_id,\n              title: problem.title,\n              difficulty: problem.difficulty,\n              slug: problem.slug\n            }));\n          setAllProblems(sortedProblems);\n          console.log(`Loaded ${sortedProblems.length} problems for learning path`);\n        } else {\n          console.error('Learning path problems not found:', data);\n          setAllProblems([]);\n        }\n      } else {\n        // Load all problems (default behavior)\n        const response = await fetch(sqlUrl('problems'));\n        const data = await response.json();\n        if (response.ok && data.problems) {\n          // Sort problems by numeric_id for sequential ordering\n          const sortedProblems = data.problems.sort((a, b) => (a.numeric_id || 0) - (b.numeric_id || 0));\n          setAllProblems(sortedProblems);\n        } else {\n          console.error('Problems data not found in response:', data);\n          setAllProblems([]);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load problems list:', error);\n      setAllProblems([]);\n    }\n  };\n\n  const navigateToProblem = (problemId) => {\n    // Preserve learning path context in URL if it exists\n    const searchParams = new URLSearchParams(location.search);\n    const learningPathId = searchParams.get('learningPath');\n    const url = learningPathId ? `/practice/${problemId}?learningPath=${learningPathId}` : `/practice/${problemId}`;\n    \n    navigate(url);\n    setShowProblemsList(false);\n    // Clear results and errors when navigating to a new problem\n    setResults(null);\n    setError(null);\n    // Scroll to top when navigating to new problem\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const navigateToNextProblem = useCallback(async () => {\n    // If in learning path context, use learning path navigation\n    if (learningPathContext && pathPosition) {\n      try {\n        const response = await fetch(learningPathsUrl(`${learningPathContext.learning_path_id}/next/${problemId}`));\n        const data = await response.json();\n        \n        if (response.ok && data.nextProblem) {\n          navigateToProblem(data.nextProblem.problem_numeric_id);\n        } else if (data.message) {\n          // Show completion message for learning path\n          alert(data.message);\n        }\n        return;\n      } catch (error) {\n        console.error('Failed to get next problem in path:', error);\n        // Fall through to regular navigation\n      }\n    }\n    \n    // Regular navigation (not in learning path or API failed)\n    if (allProblems && allProblems.length > 0 && currentProblemIndex < allProblems.length - 1) {\n      const nextProblem = allProblems[currentProblemIndex + 1];\n      if (nextProblem) {\n        navigateToProblem(nextProblem.numeric_id);\n      }\n    }\n  }, [learningPathContext, pathPosition, problemId, allProblems, currentProblemIndex]);\n\n  const navigateToPreviousProblem = useCallback(async () => {\n    // If in learning path context, use learning path navigation\n    if (learningPathContext && pathPosition && pathPosition.has_previous) {\n      const prevProblem = pathPosition.previous_problem;\n      if (prevProblem) {\n        navigateToProblem(prevProblem.problem_numeric_id);\n        return;\n      }\n    }\n    \n    // Regular navigation (not in learning path or no previous in path)\n    if (currentProblemIndex > 0) {\n      const prevProblem = allProblems[currentProblemIndex - 1];\n      navigateToProblem(prevProblem.numeric_id);\n    }\n  }, [learningPathContext, pathPosition, currentProblemIndex, allProblems]);\n\n  const getDifficultyColor = (difficulty) => {\n    switch (difficulty?.toLowerCase()) {\n      case 'easy': return 'text-green-600 bg-green-100';\n      case 'medium': return 'text-yellow-600 bg-yellow-100';\n      case 'hard': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  // Memoize the expensive schema parsing to prevent re-computation on every render\n  const parsedSchema = useMemo(() => {\n    if (!schema?.setup_sql) return { tables: [], sampleData: {} };\n    \n    const createTableRegex = /CREATE TABLE (\\w+) \\(([\\s\\S]*?)\\);/g;\n    const tables = [];\n    const sampleData = {};\n    let match;\n    \n    // Parse table structures\n    while ((match = createTableRegex.exec(schema.setup_sql)) !== null) {\n      const tableName = match[1];\n      const columnsText = match[2];\n      \n      const parseColumns = (columnsText) => {\n        const columns = [];\n        let current = '';\n        let parenDepth = 0;\n        \n        for (let i = 0; i < columnsText.length; i++) {\n          const char = columnsText[i];\n          if (char === '(') parenDepth++;\n          if (char === ')') parenDepth--;\n          \n          if (char === ',' && parenDepth === 0) {\n            if (current.trim()) columns.push(current.trim());\n            current = '';\n          } else {\n            current += char;\n          }\n        }\n        if (current.trim()) columns.push(current.trim());\n        return columns;\n      };\n      \n      const columns = parseColumns(columnsText)\n        .filter(col => col.length > 0)\n        .map(col => {\n          const parts = col.split(' ');\n          const name = parts[0];\n          const type = parts.slice(1).join(' ').toUpperCase();\n          return { name, type };\n        });\n      \n      tables.push({ name: tableName, columns });\n    }\n    \n    // Parse sample data\n    const insertMatches = [...schema.setup_sql.matchAll(/INSERT\\s+INTO\\s+(\\w+)(?:\\s*\\([^)]+\\))?\\s+VALUES\\s+([\\s\\S]*?);/gi)];\n    insertMatches.forEach(match => {\n      const tableName = match[1];\n      const valuesText = match[2];\n      const rowMatches = [...valuesText.matchAll(/\\(([\\s\\S]*?)\\)/g)];\n      sampleData[tableName] = rowMatches.slice(0, 3).map(rowMatch => {\n        return rowMatch[1].split(',').map(val => {\n          const trimmed = val.trim();\n          if (trimmed === 'NULL') return 'NULL';\n          return trimmed.replace(/^'|'$/g, '').replace(/''/g, \"'\");\n        });\n      });\n    });\n    \n    return { tables, sampleData };\n  }, [schema?.setup_sql]);\n\n  // Memoize the processed problem description to prevent re-processing\n  const processedDescription = useMemo(() => {\n    if (!problem?.description) return '';\n    \n    return problem.description\n      .replace(/\\*\\*Expected Output:\\*\\*.*?(?=\\*\\*|$)/g, '')\n      .replace(/Expected Output:.*?(?=\\n\\n|\\n\\*\\*|$)/g, '')\n      .replace(/\\*\\*Business Context:\\*\\*/g, '<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Business Context</h4>')\n      .replace(/\\*\\*Scenario:\\*\\*/g, '<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Scenario</h4>')\n      .replace(/\\*\\*Problem:\\*\\*/g, '<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Problem</h4>')\n      .replace(/Business Context:/g, '<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Business Context</h4>')\n      .replace(/Scenario:/g, '<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Scenario</h4>')\n      .replace(/Problem:/g, '<h4 class=\"text-gray-900 dark:text-white font-semibold mt-6 mb-2\">Problem</h4>')\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"text-gray-900 dark:text-white\">$1</strong>')\n      .replace(/`(.*?)`/g, '<code class=\"bg-gray-100 dark:bg-gray-800 text-red-600 dark:text-red-400 px-1 py-0.5 rounded text-sm\">$1</code>')\n      .replace(/```sql\\n([\\s\\S]*?)\\n```/g, '<pre class=\"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto mt-4 mb-4\"><code class=\"text-sm text-gray-900 dark:text-gray-100\">$1</code></pre>')\n      .replace(/\\n/g, '<br>')\n      .replace(/<br><br>/g, '<br>');\n  }, [problem?.description]);\n\n  const setupDefaultEnvironment = async () => {\n    // Default environment is set up automatically by the backend\n    console.log('Using default practice environment');\n  };\n\n  const executeQuery = async () => {\n    if (!sqlQuery.trim()) {\n      setError('Please enter a SQL query');\n      return;\n    }\n\n    setIsExecuting(true);\n    setError(null);\n    setResults(null); // Clear previous results\n    \n    // Increment attempt count\n    const newAttemptCount = attemptCount + 1;\n    setAttemptCount(newAttemptCount);\n    \n    try {\n      console.log('DEBUG: Executing query with session ID:', ProgressService.sessionId, 'for problem:', problemId);\n      \n      // Create AbortController for timeout\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout\n      \n      const requestBody = { \n        query: sqlQuery, \n        dialect: selectedDialect,\n        problemId: problem?.numeric_id || parseInt(problemId) // Use numeric ID for validation\n      };\n      \n      console.log('ðŸ“¤ Request URL:', sqlUrl('execute'));\n      console.log('ðŸ“¤ Request body:', requestBody);\n      console.log('ðŸ“¤ SQL Query preview:', sqlQuery.substring(0, 100) + '...');\n\n      const response = await fetch(sqlUrl('execute'), {\n        method: 'POST',\n        signal: controller.signal,\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Session-ID': ProgressService.sessionId,\n          ...(token && { 'Authorization': `Bearer ${token}` })\n        },\n        body: JSON.stringify(requestBody)\n      });\n      \n      clearTimeout(timeoutId);\n      \n      console.log('ðŸ“¥ Response status:', response.status);\n      console.log('ðŸ“¥ Response headers:', Object.fromEntries(response.headers.entries()));\n      \n      if (!response.ok) {\n        // Get the error message from the response\n        let errorMessage = `HTTP error! status: ${response.status}`;\n        try {\n          const errorData = await response.json();\n          console.error('âŒ API Error Response:', errorData);\n          errorMessage = errorData.message || errorData.error || errorMessage;\n        } catch (parseError) {\n          console.error('âŒ Failed to parse error response:', parseError);\n        }\n        throw new Error(errorMessage);\n      }\n      \n      const data = await response.json();\n      console.log('DEBUG: Response data:', data);\n      \n      if (data.success) {\n        // Use new backend response format\n        setResults({\n          rows: data.results || [],\n          rowCount: data.rowCount || 0,\n          validation: data.validation,\n          isCorrect: data.validation?.correct || false\n        });\n        \n        // Show validation message\n        if (data.validation && data.validation.message) {\n          console.log('ðŸ“‹ Validation Result:', data.validation.message);\n        }\n        \n        setError(null);\n        setErrorAnalysis(null);\n        \n        // Clear progress cache to ensure fresh data\n        ProgressService.clearCache();\n        \n        console.log('DEBUG: Query completed with validation:', {\n          sessionId: ProgressService.sessionId,\n          problemId: problem?.numeric_id || problemId,\n          isCorrect: data.validation?.correct || false,\n          message: data.validation?.message\n        });\n\n        // Emit progress update event if problem was solved correctly\n        if (data.validation?.correct) {\n          console.log('ðŸŽ‰ Problem solved correctly! Emitting progressUpdated event...');\n          window.dispatchEvent(new CustomEvent('progressUpdated', {\n            detail: { problemId, solved: true }\n          }));\n          console.log('âœ… progressUpdated event emitted');\n        }\n      } else {\n        console.log('DEBUG: Setting error:', data.error);\n        setError(data.error);\n        setErrorAnalysis(data.errorAnalysis || null);\n        setResults(null); // Clear results on error\n        console.log('DEBUG: Error state should now be set');\n        \n        // Note: Progress tracking for failed attempts is handled by the backend in execute.js\n      }\n    } catch (err) {\n      console.error('DEBUG: Query execution error:', err);\n      if (err.name === 'AbortError') {\n        setError('Query timed out after 30 seconds. Please try a simpler query.');\n      } else {\n        setError(`Failed to execute query: ${err.message}`);\n      }\n      setErrorAnalysis(null);\n      setResults(null); // Clear results on network error\n    } finally {\n      setIsExecuting(false);\n    }\n  };\n\n  // Close problems list when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (!event.target.closest('.relative')) {\n        setShowProblemsList(false);\n      }\n    };\n    \n    if (showProblemsList) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showProblemsList]);\n\n  // Debug: Track error state changes\n  useEffect(() => {\n    console.log('DEBUG: Error state changed to:', error);\n  }, [error]);\n\n  // Add keyboard shortcuts\n  useEffect(() => {\n    const handleKeyPress = (event) => {\n      // Only trigger shortcuts when not typing in textarea or input\n      if (event.target.tagName === 'TEXTAREA' || event.target.tagName === 'INPUT') {\n        return;\n      }\n      \n      if (event.key === 'ArrowLeft' && event.ctrlKey) {\n        event.preventDefault();\n        navigateToPreviousProblem();\n      } else if (event.key === 'ArrowRight' && event.ctrlKey) {\n        event.preventDefault();\n        navigateToNextProblem();\n      } else if (event.key === 'p' && event.ctrlKey) {\n        event.preventDefault();\n        setShowProblemsList(!showProblemsList);\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyPress);\n    return () => {\n      document.removeEventListener('keydown', handleKeyPress);\n    };\n  }, [currentProblemIndex, allProblems?.length, showProblemsList, navigateToNextProblem, navigateToPreviousProblem]);\n\n  // If no problem is selected, redirect to problems page\n  if (!problemId) {\n    return <Navigate to=\"/problems\" replace />;\n  }\n\n  // Debug loading state\n  if (!problem) {\n    console.log('ðŸ” PROBLEM PAGE: No problem data loaded yet, problemId:', problemId);\n    return (\n      <div className=\"h-screen flex items-center justify-center bg-white dark:bg-gray-900\">\n        <div className=\"text-center\">\n          <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4\"></div>\n          <p className=\"text-gray-600 dark:text-gray-400\">Loading problem {problemId}...</p>\n        </div>\n      </div>\n    );\n  }\n  // Problem mode - show the full problem-solving interface\n  return (\n    <div className=\"h-screen flex flex-col bg-white dark:bg-gray-900\">\n      {/* Header - LeetCode Style */}\n      <div className=\"border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\">\n        <div className=\"px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <button\n                onClick={() => navigate('/problems')}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                </svg>\n              </button>\n              {problem && (\n                <div className=\"flex items-center space-x-3\">\n                  <h1 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                    {console.log('DEBUG RENDER: problem object:', problem) || ''}\n                    {console.log('DEBUG RENDER: numeric_id:', problem.numeric_id, 'title:', problem.title) || ''}\n                    {problem.numeric_id || 'No ID'}. {problem.title || 'No Title'}\n                  </h1>\n                  <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                    problem.difficulty === 'easy' ? 'bg-green-100 text-green-800' :\n                    problem.difficulty === 'medium' ? 'bg-yellow-100 text-yellow-800' :\n                    'bg-red-100 text-red-800'\n                  }`}>\n                    {problem.difficulty?.charAt(0).toUpperCase() + problem.difficulty?.slice(1)}\n                  </span>\n                </div>\n              )}\n            </div>\n            \n            <div className=\"flex items-center space-x-3\">\n              <BookmarkButton problemId={problem?.id} size=\"sm\" />\n              <button\n                onClick={navigateToPreviousProblem}\n                disabled={currentProblemIndex === 0}\n                className=\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 disabled:opacity-50\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                </svg>\n              </button>\n              <button\n                onClick={() => setShowProblemsList(!showProblemsList)}\n                className=\"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white border border-gray-300 dark:border-gray-600 rounded\"\n              >\n                {currentProblemIndex + 1} / {allProblems?.length || 0}\n              </button>\n              <button\n                onClick={navigateToNextProblem}\n                disabled={currentProblemIndex === (allProblems?.length || 0) - 1}\n                className=\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 disabled:opacity-50\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content - LeetCode Split Layout */}\n      <div className=\"flex-1 flex\">\n        {/* Left Panel - Problem Description */}\n        <div className=\"w-1/2 border-r border-gray-200 dark:border-gray-700 flex flex-col\">\n          {/* Tabs */}\n          <div className=\"border-b border-gray-200 dark:border-gray-700\">\n            <nav className=\"flex px-4\">\n              <button \n                onClick={() => setActiveTab('description')}\n                className={`px-4 py-3 text-sm font-medium transition-colors ${\n                  activeTab === 'description' \n                    ? 'text-blue-600 border-b-2 border-blue-600' \n                    : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'\n                }`}\n              >\n                Description\n              </button>\n              <button \n                onClick={() => setActiveTab('editorial')}\n                className={`px-4 py-3 text-sm font-medium transition-colors ${\n                  activeTab === 'editorial' \n                    ? 'text-blue-600 border-b-2 border-blue-600' \n                    : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'\n                }`}\n              >\n                Editorial\n              </button>\n              <button \n                onClick={() => setActiveTab('solutions')}\n                className={`px-4 py-3 text-sm font-medium transition-colors ${\n                  activeTab === 'solutions' \n                    ? 'text-blue-600 border-b-2 border-blue-600' \n                    : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'\n                }`}\n              >\n                Solutions\n              </button>\n            </nav>\n          </div>\n          \n          {/* Problem Content */}\n          <div className=\"flex-1 overflow-y-auto p-4\">\n            {problem && (\n              <div className=\"space-y-6\">\n                {/* Description Tab */}\n                {activeTab === 'description' && (\n                  <>\n                    {/* Problem Description */}\n                    <div className=\"prose prose-sm max-w-none text-gray-700 dark:text-gray-300\">\n                      <div dangerouslySetInnerHTML={{ __html: processedDescription }} />\n                    </div>\n\n                    {/* Database Schema with Sample Data */}\n                    {parsedSchema.tables.length > 0 && (\n                      <div>\n                        <h4 className=\"text-gray-900 dark:text-white font-semibold mb-4\">Database Schema</h4>\n                        <div className=\"space-y-4\">\n                          {parsedSchema.tables.map(table => (\n                            <div key={table.name} className=\"border border-gray-200 dark:border-gray-700 rounded-lg\">\n                              <div className=\"bg-gray-50 dark:bg-gray-800 px-4 py-2 border-b border-gray-200 dark:border-gray-700\">\n                                <span className=\"font-mono text-sm font-semibold text-gray-900 dark:text-white\">{table.name}</span>\n                              </div>\n                              \n                              {/* Column definitions */}\n                              <div className=\"divide-y divide-gray-100 dark:divide-gray-700\">\n                                {table.columns.map(col => (\n                                  <div key={col.name} className=\"px-4 py-2 flex justify-between items-center\">\n                                    <span className=\"font-mono text-sm text-gray-700 dark:text-gray-300\">{col.name}</span>\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">\n                                      {col.type}\n                                    </span>\n                                  </div>\n                                ))}\n                              </div>\n                              \n                              {/* Sample Data */}\n                              {parsedSchema.sampleData[table.name] && parsedSchema.sampleData[table.name].length > 0 && (\n                                <div className=\"border-t border-gray-200 dark:border-gray-700 p-4\">\n                                  <h5 className=\"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 uppercase tracking-wider\">Sample Data</h5>\n                                  <div className=\"overflow-x-auto\">\n                                    <table className=\"min-w-full text-xs\">\n                                      <thead>\n                                        <tr className=\"bg-gray-50 dark:bg-gray-800\">\n                                          {table.columns.map(col => (\n                                            <th key={col.name} className=\"px-3 py-2 text-left font-medium text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-600\">\n                                              {col.name}\n                                            </th>\n                                          ))}\n                                        </tr>\n                                      </thead>\n                                      <tbody>\n                                        {parsedSchema.sampleData[table.name].map((row, idx) => (\n                                          <tr key={idx} className=\"bg-white dark:bg-gray-900\">\n                                            {row.map((cell, cellIdx) => (\n                                              <td key={cellIdx} className=\"px-3 py-2 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600\">\n                                                {cell}\n                                              </td>\n                                            ))}\n                                          </tr>\n                                        ))}\n                                      </tbody>\n                                    </table>\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Expected Output */}\n                    {schema && schema.expected_output && Array.isArray(schema.expected_output) && schema.expected_output.length > 0 && (\n                      <div>\n                        <h4 className=\"text-gray-900 dark:text-white font-semibold mb-4\">Expected Output</h4>\n                        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden\">\n                          <div className=\"overflow-x-auto\">\n                            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                              <thead className=\"bg-gray-50 dark:bg-gray-800\">\n                                <tr>\n                                  {schema.expected_output[0] ? Object.keys(schema.expected_output[0]).map((column) => (\n                                    <th key={column} className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                                      {column}\n                                    </th>\n                                  )) : null}\n                                </tr>\n                              </thead>\n                              <tbody className=\"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700\">\n                                {schema.expected_output.slice(0, 5).map((row, idx) => (\n                                  <tr key={idx}>\n                                    {Object.values(row).map((cell, cellIdx) => (\n                                      <td key={cellIdx} className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100\">\n                                        {cell !== null ? cell.toString() : 'NULL'}\n                                      </td>\n                                    ))}\n                                  </tr>\n                                ))}\n                              </tbody>\n                            </table>\n                          </div>\n                          {schema.expected_output.length > 5 && (\n                            <div className=\"bg-gray-50 dark:bg-gray-800 px-4 py-2 text-xs text-gray-500 dark:text-gray-400 text-center\">\n                              Showing 5 of {schema.expected_output.length} rows\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    )}\n                  </>\n                )}\n\n                {/* Editorial Tab */}\n                {activeTab === 'editorial' && (\n                  <div className=\"text-center py-12\">\n                    <div className=\"text-gray-400 text-6xl mb-4\">ðŸ“š</div>\n                    <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">Editorial Coming Soon</h3>\n                    <p className=\"text-gray-600 dark:text-gray-400\">\n                      Detailed explanations and approaches for this problem will be available soon.\n                    </p>\n                  </div>\n                )}\n\n                {/* Solutions Tab */}\n                {activeTab === 'solutions' && (\n                  <div className=\"space-y-6\">\n                    {schema && schema.solution_sql ? (\n                      <div>\n                        <div className=\"flex items-center justify-between mb-4\">\n                          <h4 className=\"text-gray-900 dark:text-white font-semibold\">Official Solution</h4>\n                          <button\n                            onClick={async (event) => {\n                              try {\n                                if (navigator.clipboard && navigator.clipboard.writeText) {\n                                  await navigator.clipboard.writeText(schema.solution_sql);\n                                  // Show success feedback\n                                  const button = event.target;\n                                  const originalText = button.textContent;\n                                  button.textContent = 'Copied!';\n                                  button.className = 'px-3 py-1.5 bg-green-600 text-white text-sm rounded transition-colors';\n                                  setTimeout(() => {\n                                    button.textContent = originalText;\n                                    button.className = 'px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors';\n                                  }, 2000);\n                                } else {\n                                  // Fallback for older browsers\n                                  const textArea = document.createElement('textarea');\n                                  textArea.value = schema.solution_sql;\n                                  textArea.style.position = 'fixed';\n                                  textArea.style.opacity = '0';\n                                  document.body.appendChild(textArea);\n                                  textArea.select();\n                                  document.execCommand('copy');\n                                  document.body.removeChild(textArea);\n                                  \n                                  // Show success feedback\n                                  const button = event.target;\n                                  const originalText = button.textContent;\n                                  button.textContent = 'Copied!';\n                                  button.className = 'px-3 py-1.5 bg-green-600 text-white text-sm rounded transition-colors';\n                                  setTimeout(() => {\n                                    button.textContent = originalText;\n                                    button.className = 'px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors';\n                                  }, 2000);\n                                }\n                              } catch (error) {\n                                console.error('Failed to copy solution:', error);\n                                // Show error feedback\n                                const button = event.target;\n                                const originalText = button.textContent;\n                                button.textContent = 'Copy Failed!';\n                                button.className = 'px-3 py-1.5 bg-red-600 text-white text-sm rounded transition-colors';\n                                setTimeout(() => {\n                                  button.textContent = originalText;\n                                  button.className = 'px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors';\n                                }, 2000);\n                              }\n                            }}\n                            className=\"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors\"\n                          >\n                            Copy Solution\n                          </button>\n                        </div>\n                        <div className=\"bg-gray-50 dark:bg-gray-800 rounded-lg p-4\">\n                          <pre className=\"text-sm text-gray-900 dark:text-gray-100 overflow-x-auto\">\n                            <code>{schema.solution_sql}</code>\n                          </pre>\n                        </div>\n                        <div className=\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/50 border border-blue-200 dark:border-blue-800 rounded-lg\">\n                          <h5 className=\"font-medium text-blue-900 dark:text-blue-300 mb-2\">Approach</h5>\n                          <p className=\"text-sm text-blue-800 dark:text-blue-300\">\n                            This solution demonstrates the optimal approach to solving this problem. \n                            Study the query structure and try to understand the logic before looking at the code.\n                          </p>\n                        </div>\n                      </div>\n                    ) : (\n                      <div className=\"text-center py-12\">\n                        <div className=\"text-gray-400 text-6xl mb-4\">ðŸ”</div>\n                        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">Solution Locked</h3>\n                        <p className=\"text-gray-600 dark:text-gray-400\">\n                          Complete this problem to unlock the official solution.\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Right Panel - Code Editor */}\n        <div className=\"w-1/2 flex flex-col\">\n          {/* Code Editor Header */}\n          <div className=\"border-b border-gray-200 dark:border-gray-700 px-4 py-3\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">SQL</span>\n                <select\n                  value={selectedDialect}\n                  onChange={(e) => setSelectedDialect(e.target.value)}\n                  className=\"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                >\n                  <option value=\"postgresql\">PostgreSQL</option>\n                  <option value=\"mysql\">MySQL</option>\n                </select>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={executeQuery}\n                  disabled={isExecuting}\n                  className=\"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white text-sm font-medium rounded-md transition-colors\"\n                >\n                  <svg className=\"w-4 h-4 inline mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z\" clipRule=\"evenodd\" />\n                  </svg>\n                  Run\n                </button>\n                <button\n                  onClick={executeQuery}\n                  disabled={isExecuting || !sqlQuery.trim()}\n                  className=\"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white text-sm font-medium rounded-md transition-colors\"\n                >\n                  Submit\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Code Editor */}\n          <div className=\"flex-1 flex flex-col\">\n            <div className=\"h-80 border-b border-gray-200 dark:border-gray-700\">\n              <SQLHighlightEditor\n                value={sqlQuery}\n                onChange={setSqlQuery}\n                onExecute={executeQuery}\n                isExecuting={isExecuting}\n                height=\"100%\"\n              />\n            </div>\n\n            {/* Results Panel */}\n            <div className=\"flex-1 p-4 bg-gray-50 dark:bg-gray-900\">\n              {isExecuting && (\n                <div className=\"flex items-center justify-center py-8\">\n                  <div className=\"inline-flex items-center space-x-2\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\n                    <span className=\"text-sm text-gray-600 dark:text-gray-400\">Running...</span>\n                  </div>\n                </div>\n              )}\n\n              {error && (\n                <div className=\"mb-4 p-3 bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-800 rounded text-sm\">\n                  <div className=\"font-medium text-red-800 dark:text-red-300 mb-1\">Error</div>\n                  <div className=\"text-red-700 dark:text-red-400\">{error}</div>\n                </div>\n              )}\n\n              {results && (\n                <div className=\"space-y-4\">\n                  {/* Validation Results */}\n                  {results.isCorrect !== null && (\n                    <div className={`p-3 rounded border ${\n                      results.isCorrect \n                        ? 'bg-green-50 dark:bg-green-900/50 border-green-200 dark:border-green-800 text-green-800 dark:text-green-300'\n                        : 'bg-red-50 dark:bg-red-900/50 border-red-200 dark:border-red-800 text-red-800 dark:text-red-300'\n                    }`}>\n                      <div className=\"flex items-center space-x-2\">\n                        <span>{results.isCorrect ? 'âœ“' : 'âœ—'}</span>\n                        <span className=\"font-medium\">\n                          {results.isCorrect ? 'Accepted' : 'Wrong Answer'}\n                        </span>\n                      </div>\n                      {results.feedback && (\n                        <div className=\"text-sm mt-1\">{results.feedback}</div>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Validation Message */}\n                  {results && results.validation && results.validation.message && (\n                    <div className={`mb-4 p-4 rounded-lg border ${\n                      results.validation.correct \n                        ? 'bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400' \n                        : 'bg-yellow-50 border-yellow-200 text-yellow-800 dark:bg-yellow-900/20 dark:border-yellow-800 dark:text-yellow-400'\n                    }`}>\n                      <div className=\"flex items-start space-x-3\">\n                        <div className=\"flex-shrink-0\">\n                          {results.validation.correct ? (\n                            <svg className=\"w-5 h-5 text-green-600 dark:text-green-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                              <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                            </svg>\n                          ) : (\n                            <svg className=\"w-5 h-5 text-yellow-600 dark:text-yellow-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                              <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                            </svg>\n                          )}\n                        </div>\n                        <div className=\"flex-1\">\n                          <p className=\"text-sm font-medium\">\n                            {results.validation.message}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Query Results */}\n                  {results && results.rows && results.rows.length > 0 && (\n                    <div>\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                        {results.rows.length} rows â€¢ {results.executionTime}\n                      </div>\n                      <div className=\"border border-gray-200 dark:border-gray-700 rounded max-h-80 overflow-y-auto\">\n                          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                            <thead className=\"bg-gray-50 dark:bg-gray-800 sticky top-0\">\n                              <tr>\n                                {Object.keys(results.rows[0]).map((column) => (\n                                  <th key={column} className=\"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                                    {column}\n                                  </th>\n                                ))}\n                              </tr>\n                            </thead>\n                            <tbody className=\"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700\">\n                              {results.rows.map((row, idx) => (\n                                <tr key={idx}>\n                                  {Object.values(row).map((cell, cellIdx) => (\n                                    <td key={cellIdx} className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100\">\n                                      {cell !== null ? cell.toString() : <span className=\"text-gray-400\">NULL</span>}\n                                    </td>\n                                  ))}\n                                </tr>\n                              ))}\n                            </tbody>\n                          </table>\n                        {results.rows.length > 10 && (\n                          <div className=\"bg-gray-50 dark:bg-gray-800 px-4 py-2 text-xs text-gray-500 dark:text-gray-400 text-center border-t border-gray-200 dark:border-gray-700\">\n                            Showing all {results.rows.length} rows â€¢ Scroll to see more\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  )}\n\n                  {results.rows && results.rows.length === 0 && (\n                    <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                      Query executed successfully but returned no rows\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {!results && !error && !isExecuting && (\n                <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                  Run your code to see results here\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Problems dropdown */}\n      {showProblemsList && (\n        <div className=\"fixed top-16 right-4 w-80 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto\">\n          <div className=\"p-2\">\n            {allProblems?.map((prob, index) => (\n              <button\n                key={prob.id}\n                onClick={() => {\n                  navigateToProblem(prob.numeric_id);\n                  setShowProblemsList(false);\n                }}\n                className={`w-full text-left px-3 py-2 rounded text-sm transition-colors ${\n                  prob.numeric_id === problem?.numeric_id\n                    ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'\n                    : 'hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300'\n                }`}\n              >\n                <div className=\"flex items-center space-x-2\">\n                  <span className=\"font-medium\">{prob.numeric_id}.</span>\n                  <span className=\"truncate flex-1\">{prob.title}</span>\n                  <span className={`px-1 py-0.5 rounded text-xs ${\n                    prob.difficulty === 'easy' ? 'bg-green-100 text-green-800' :\n                    prob.difficulty === 'medium' ? 'bg-yellow-100 text-yellow-800' :\n                    'bg-red-100 text-red-800'\n                  }`}>\n                    {prob.difficulty?.charAt(0).toUpperCase()}\n                  </span>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default PracticePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}