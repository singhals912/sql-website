{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useNavigate,useLocation,Link}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{authUrl}from'../config/environment';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function EmailVerificationPage(){const[otp,setOTP]=useState(['','','','','','']);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const[resendLoading,setResendLoading]=useState(false);const[resendCooldown,setResendCooldown]=useState(0);const[canResend,setCanResend]=useState(true);const navigate=useNavigate();const location=useLocation();const{login}=useAuth();const inputRefs=useRef([]);// Get user data from registration flow\nconst{userId,email,fullName}=location.state||{};useEffect(()=>{// Redirect if no user data\nif(!userId||!email){navigate('/register',{replace:true});return;}// Focus first input\nif(inputRefs.current[0]){inputRefs.current[0].focus();}},[userId,email,navigate]);useEffect(()=>{// Countdown timer for resend button\nlet interval;if(resendCooldown>0){interval=setInterval(()=>{setResendCooldown(prev=>{if(prev<=1){setCanResend(true);return 0;}return prev-1;});},1000);}return()=>clearInterval(interval);},[resendCooldown]);const handleOTPChange=(index,value)=>{// Only allow digits\nif(value&&!/^\\d$/.test(value))return;const newOTP=[...otp];newOTP[index]=value;setOTP(newOTP);// Auto-focus next input\nif(value&&index<5){var _inputRefs$current;(_inputRefs$current=inputRefs.current[index+1])===null||_inputRefs$current===void 0?void 0:_inputRefs$current.focus();}};const handleKeyDown=(index,e)=>{// Handle backspace\nif(e.key==='Backspace'&&!otp[index]&&index>0){var _inputRefs$current2;(_inputRefs$current2=inputRefs.current[index-1])===null||_inputRefs$current2===void 0?void 0:_inputRefs$current2.focus();}// Handle paste\nif(e.key==='Enter'){handleVerifyOTP();}};const handlePaste=e=>{var _inputRefs$current$la;e.preventDefault();const pastedData=e.clipboardData.getData('text').replace(/\\D/g,'').slice(0,6);const newOTP=[...otp];for(let i=0;i<6;i++){newOTP[i]=pastedData[i]||'';}setOTP(newOTP);// Focus the last filled input or first empty one\nconst lastFilledIndex=Math.min(pastedData.length-1,5);(_inputRefs$current$la=inputRefs.current[lastFilledIndex])===null||_inputRefs$current$la===void 0?void 0:_inputRefs$current$la.focus();};const handleVerifyOTP=async()=>{const otpString=otp.join('');if(otpString.length!==6){setError('Please enter all 6 digits');return;}setLoading(true);setError('');try{const response=await fetch(authUrl('verify-email'),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId,otp:otpString})});const data=await response.json();if(response.ok&&data.success){setSuccess('Email verified successfully! Redirecting...');// Store the token and user data\nif(data.token){localStorage.setItem('token',data.token);}// Redirect to the intended page or dashboard\nsetTimeout(()=>{var _location$state,_location$state$from;navigate(((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/dashboard',{replace:true});},1500);}else{var _inputRefs$current$;setError(data.error||'Verification failed');// Clear OTP on error\nsetOTP(['','','','','','']);(_inputRefs$current$=inputRefs.current[0])===null||_inputRefs$current$===void 0?void 0:_inputRefs$current$.focus();}}catch(error){console.error('Verification error:',error);setError('Verification failed. Please try again.');}finally{setLoading(false);}};const handleResendOTP=async()=>{if(!canResend||resendLoading)return;setResendLoading(true);setError('');try{const response=await fetch(authUrl('resend-verification'),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId,email})});const data=await response.json();if(response.ok&&data.success){var _inputRefs$current$2;setSuccess('New verification code sent to your email!');setCanResend(false);setResendCooldown(60);// 60 seconds cooldown\n// Clear current OTP\nsetOTP(['','','','','','']);(_inputRefs$current$2=inputRefs.current[0])===null||_inputRefs$current$2===void 0?void 0:_inputRefs$current$2.focus();// Clear success message after 3 seconds\nsetTimeout(()=>setSuccess(''),3000);}else{setError(data.error||'Failed to resend verification code');}}catch(error){console.error('Resend error:',error);setError('Failed to resend verification code');}finally{setResendLoading(false);}};if(!userId||!email){return null;// Will redirect via useEffect\n}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-green-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-3xl font-bold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors\",children:\"SQL Practice Platform\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-6xl\",children:\"\\uD83D\\uDCE7\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-4 text-3xl font-extrabold text-gray-900 dark:text-white\",children:\"Verify Your Email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-600 dark:text-gray-400\",children:\"We've sent a 6-digit verification code to\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-blue-600 dark:text-blue-400\",children:email})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 py-8 px-4 shadow-xl rounded-lg sm:px-10 border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleVerifyOTP();},className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 text-center mb-4\",children:\"Enter Verification Code\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center space-x-2\",children:otp.map((digit,index)=>/*#__PURE__*/_jsx(\"input\",{ref:el=>inputRefs.current[index]=el,type:\"text\",maxLength:\"1\",value:digit,onChange:e=>handleOTPChange(index,e.target.value),onKeyDown:e=>handleKeyDown(index,e),onPaste:handlePaste,className:\"w-12 h-14 text-center text-xl font-bold border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none bg-white dark:bg-gray-700 dark:text-white transition-colors\",disabled:loading},index))})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md bg-red-50 dark:bg-red-900/50 p-4 border border-red-200 dark:border-red-800\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-red-600 dark:text-red-400 text-center\",children:error})}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md bg-green-50 dark:bg-green-900/50 p-4 border border-green-200 dark:border-green-800\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-green-600 dark:text-green-400 text-center\",children:success})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||otp.join('').length!==6,className:\"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors dark:focus:ring-offset-gray-800\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",children:/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-5 w-5 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]})}),\"Verifying...\"]}):'Verify Email'})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[\"Didn't receive the code?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleResendOTP,disabled:!canResend||resendLoading,className:\"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 disabled:opacity-50 disabled:cursor-not-allowed\",children:resendLoading?'Sending...':resendCooldown>0?\"Resend in \".concat(resendCooldown,\"s\"):'Resend Code'})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 dark:text-gray-400 text-center space-y-1\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\uD83D\\uDD12 Your verification code expires in 15 minutes\"}),/*#__PURE__*/_jsx(\"div\",{children:\"\\uD83D\\uDCA1 Check your spam folder if you don't see the email\"})]})})]})})]});}export default EmailVerificationPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useLocation","Link","useAuth","authUrl","jsx","_jsx","jsxs","_jsxs","EmailVerificationPage","otp","setOTP","loading","setLoading","error","setError","success","setSuccess","resendLoading","setResendLoading","resendCooldown","setResendCooldown","canResend","setCanResend","navigate","location","login","inputRefs","userId","email","fullName","state","replace","current","focus","interval","setInterval","prev","clearInterval","handleOTPChange","index","value","test","newOTP","_inputRefs$current","handleKeyDown","e","key","_inputRefs$current2","handleVerifyOTP","handlePaste","_inputRefs$current$la","preventDefault","pastedData","clipboardData","getData","slice","i","lastFilledIndex","Math","min","length","otpString","join","response","fetch","method","headers","body","JSON","stringify","data","json","ok","token","localStorage","setItem","setTimeout","_location$state","_location$state$from","from","pathname","_inputRefs$current$","console","handleResendOTP","_inputRefs$current$2","className","children","to","onSubmit","map","digit","ref","el","type","maxLength","onChange","target","onKeyDown","onPaste","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d","onClick","concat"],"sources":["/Users/ss/Downloads/Code/Vibe_coding/SQL_practice_website/sql-practice-platform/frontend/src/pages/EmailVerificationPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate, useLocation, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { authUrl } from '../config/environment';\n\nfunction EmailVerificationPage() {\n    const [otp, setOTP] = useState(['', '', '', '', '', '']);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    const [resendLoading, setResendLoading] = useState(false);\n    const [resendCooldown, setResendCooldown] = useState(0);\n    const [canResend, setCanResend] = useState(true);\n\n    const navigate = useNavigate();\n    const location = useLocation();\n    const { login } = useAuth();\n    const inputRefs = useRef([]);\n\n    // Get user data from registration flow\n    const { userId, email, fullName } = location.state || {};\n\n    useEffect(() => {\n        // Redirect if no user data\n        if (!userId || !email) {\n            navigate('/register', { replace: true });\n            return;\n        }\n\n        // Focus first input\n        if (inputRefs.current[0]) {\n            inputRefs.current[0].focus();\n        }\n    }, [userId, email, navigate]);\n\n    useEffect(() => {\n        // Countdown timer for resend button\n        let interval;\n        if (resendCooldown > 0) {\n            interval = setInterval(() => {\n                setResendCooldown(prev => {\n                    if (prev <= 1) {\n                        setCanResend(true);\n                        return 0;\n                    }\n                    return prev - 1;\n                });\n            }, 1000);\n        }\n        return () => clearInterval(interval);\n    }, [resendCooldown]);\n\n    const handleOTPChange = (index, value) => {\n        // Only allow digits\n        if (value && !/^\\d$/.test(value)) return;\n\n        const newOTP = [...otp];\n        newOTP[index] = value;\n        setOTP(newOTP);\n\n        // Auto-focus next input\n        if (value && index < 5) {\n            inputRefs.current[index + 1]?.focus();\n        }\n    };\n\n    const handleKeyDown = (index, e) => {\n        // Handle backspace\n        if (e.key === 'Backspace' && !otp[index] && index > 0) {\n            inputRefs.current[index - 1]?.focus();\n        }\n        \n        // Handle paste\n        if (e.key === 'Enter') {\n            handleVerifyOTP();\n        }\n    };\n\n    const handlePaste = (e) => {\n        e.preventDefault();\n        const pastedData = e.clipboardData.getData('text').replace(/\\D/g, '').slice(0, 6);\n        const newOTP = [...otp];\n        \n        for (let i = 0; i < 6; i++) {\n            newOTP[i] = pastedData[i] || '';\n        }\n        \n        setOTP(newOTP);\n        \n        // Focus the last filled input or first empty one\n        const lastFilledIndex = Math.min(pastedData.length - 1, 5);\n        inputRefs.current[lastFilledIndex]?.focus();\n    };\n\n    const handleVerifyOTP = async () => {\n        const otpString = otp.join('');\n        \n        if (otpString.length !== 6) {\n            setError('Please enter all 6 digits');\n            return;\n        }\n\n        setLoading(true);\n        setError('');\n\n        try {\n            const response = await fetch(authUrl('verify-email'), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    userId,\n                    otp: otpString\n                }),\n            });\n\n            const data = await response.json();\n\n            if (response.ok && data.success) {\n                setSuccess('Email verified successfully! Redirecting...');\n                \n                // Store the token and user data\n                if (data.token) {\n                    localStorage.setItem('token', data.token);\n                }\n\n                // Redirect to the intended page or dashboard\n                setTimeout(() => {\n                    navigate(location.state?.from?.pathname || '/dashboard', { replace: true });\n                }, 1500);\n            } else {\n                setError(data.error || 'Verification failed');\n                // Clear OTP on error\n                setOTP(['', '', '', '', '', '']);\n                inputRefs.current[0]?.focus();\n            }\n        } catch (error) {\n            console.error('Verification error:', error);\n            setError('Verification failed. Please try again.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleResendOTP = async () => {\n        if (!canResend || resendLoading) return;\n\n        setResendLoading(true);\n        setError('');\n\n        try {\n            const response = await fetch(authUrl('resend-verification'), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    userId,\n                    email\n                }),\n            });\n\n            const data = await response.json();\n\n            if (response.ok && data.success) {\n                setSuccess('New verification code sent to your email!');\n                setCanResend(false);\n                setResendCooldown(60); // 60 seconds cooldown\n                // Clear current OTP\n                setOTP(['', '', '', '', '', '']);\n                inputRefs.current[0]?.focus();\n                \n                // Clear success message after 3 seconds\n                setTimeout(() => setSuccess(''), 3000);\n            } else {\n                setError(data.error || 'Failed to resend verification code');\n            }\n        } catch (error) {\n            console.error('Resend error:', error);\n            setError('Failed to resend verification code');\n        } finally {\n            setResendLoading(false);\n        }\n    };\n\n    if (!userId || !email) {\n        return null; // Will redirect via useEffect\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\n            <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\n                <div className=\"text-center\">\n                    <Link to=\"/\" className=\"text-3xl font-bold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors\">\n                        SQL Practice Platform\n                    </Link>\n                    <div className=\"mt-6 text-6xl\">📧</div>\n                    <h2 className=\"mt-4 text-3xl font-extrabold text-gray-900 dark:text-white\">\n                        Verify Your Email\n                    </h2>\n                    <p className=\"mt-2 text-sm text-gray-600 dark:text-gray-400\">\n                        We've sent a 6-digit verification code to\n                    </p>\n                    <p className=\"font-medium text-blue-600 dark:text-blue-400\">\n                        {email}\n                    </p>\n                </div>\n            </div>\n\n            <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\n                <div className=\"bg-white dark:bg-gray-800 py-8 px-4 shadow-xl rounded-lg sm:px-10 border border-gray-200 dark:border-gray-700\">\n                    <form onSubmit={(e) => { e.preventDefault(); handleVerifyOTP(); }} className=\"space-y-6\">\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 text-center mb-4\">\n                                Enter Verification Code\n                            </label>\n                            <div className=\"flex justify-center space-x-2\">\n                                {otp.map((digit, index) => (\n                                    <input\n                                        key={index}\n                                        ref={el => inputRefs.current[index] = el}\n                                        type=\"text\"\n                                        maxLength=\"1\"\n                                        value={digit}\n                                        onChange={(e) => handleOTPChange(index, e.target.value)}\n                                        onKeyDown={(e) => handleKeyDown(index, e)}\n                                        onPaste={handlePaste}\n                                        className=\"w-12 h-14 text-center text-xl font-bold border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-blue-500 focus:outline-none bg-white dark:bg-gray-700 dark:text-white transition-colors\"\n                                        disabled={loading}\n                                    />\n                                ))}\n                            </div>\n                        </div>\n\n                        {error && (\n                            <div className=\"rounded-md bg-red-50 dark:bg-red-900/50 p-4 border border-red-200 dark:border-red-800\">\n                                <div className=\"text-sm text-red-600 dark:text-red-400 text-center\">{error}</div>\n                            </div>\n                        )}\n\n                        {success && (\n                            <div className=\"rounded-md bg-green-50 dark:bg-green-900/50 p-4 border border-green-200 dark:border-green-800\">\n                                <div className=\"text-sm text-green-600 dark:text-green-400 text-center\">{success}</div>\n                            </div>\n                        )}\n\n                        <div>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || otp.join('').length !== 6}\n                                className=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors dark:focus:ring-offset-gray-800\"\n                            >\n                                {loading ? (\n                                    <div className=\"flex items-center\">\n                                        <div className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\">\n                                            <svg className=\"animate-spin h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                                                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                                                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                                            </svg>\n                                        </div>\n                                        Verifying...\n                                    </div>\n                                ) : (\n                                    'Verify Email'\n                                )}\n                            </button>\n                        </div>\n\n                        <div className=\"text-center\">\n                            <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                                Didn't receive the code?{' '}\n                                <button\n                                    type=\"button\"\n                                    onClick={handleResendOTP}\n                                    disabled={!canResend || resendLoading}\n                                    className=\"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300 disabled:opacity-50 disabled:cursor-not-allowed\"\n                                >\n                                    {resendLoading ? 'Sending...' : \n                                     resendCooldown > 0 ? `Resend in ${resendCooldown}s` : \n                                     'Resend Code'}\n                                </button>\n                            </p>\n                        </div>\n                    </form>\n\n                    <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\n                        <div className=\"text-xs text-gray-500 dark:text-gray-400 text-center space-y-1\">\n                            <div>🔒 Your verification code expires in 15 minutes</div>\n                            <div>💡 Check your spam folder if you don't see the email</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default EmailVerificationPage;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,WAAW,CAAEC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CACjE,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,OAAO,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,QAAS,CAAAC,qBAAqBA,CAAA,CAAG,CAC7B,KAAM,CAACC,GAAG,CAAEC,MAAM,CAAC,CAAGd,QAAQ,CAAC,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAAC,CACxD,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACqB,aAAa,CAAEC,gBAAgB,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACuB,cAAc,CAAEC,iBAAiB,CAAC,CAAGxB,QAAQ,CAAC,CAAC,CAAC,CACvD,KAAM,CAACyB,SAAS,CAAEC,YAAY,CAAC,CAAG1B,QAAQ,CAAC,IAAI,CAAC,CAEhD,KAAM,CAAA2B,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAyB,QAAQ,CAAGxB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEyB,KAAM,CAAC,CAAGvB,OAAO,CAAC,CAAC,CAC3B,KAAM,CAAAwB,SAAS,CAAG5B,MAAM,CAAC,EAAE,CAAC,CAE5B;AACA,KAAM,CAAE6B,MAAM,CAAEC,KAAK,CAAEC,QAAS,CAAC,CAAGL,QAAQ,CAACM,KAAK,EAAI,CAAC,CAAC,CAExDjC,SAAS,CAAC,IAAM,CACZ;AACA,GAAI,CAAC8B,MAAM,EAAI,CAACC,KAAK,CAAE,CACnBL,QAAQ,CAAC,WAAW,CAAE,CAAEQ,OAAO,CAAE,IAAK,CAAC,CAAC,CACxC,OACJ,CAEA;AACA,GAAIL,SAAS,CAACM,OAAO,CAAC,CAAC,CAAC,CAAE,CACtBN,SAAS,CAACM,OAAO,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAChC,CACJ,CAAC,CAAE,CAACN,MAAM,CAAEC,KAAK,CAAEL,QAAQ,CAAC,CAAC,CAE7B1B,SAAS,CAAC,IAAM,CACZ;AACA,GAAI,CAAAqC,QAAQ,CACZ,GAAIf,cAAc,CAAG,CAAC,CAAE,CACpBe,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACzBf,iBAAiB,CAACgB,IAAI,EAAI,CACtB,GAAIA,IAAI,EAAI,CAAC,CAAE,CACXd,YAAY,CAAC,IAAI,CAAC,CAClB,MAAO,EAAC,CACZ,CACA,MAAO,CAAAc,IAAI,CAAG,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAAE,IAAI,CAAC,CACZ,CACA,MAAO,IAAMC,aAAa,CAACH,QAAQ,CAAC,CACxC,CAAC,CAAE,CAACf,cAAc,CAAC,CAAC,CAEpB,KAAM,CAAAmB,eAAe,CAAGA,CAACC,KAAK,CAAEC,KAAK,GAAK,CACtC;AACA,GAAIA,KAAK,EAAI,CAAC,MAAM,CAACC,IAAI,CAACD,KAAK,CAAC,CAAE,OAElC,KAAM,CAAAE,MAAM,CAAG,CAAC,GAAGjC,GAAG,CAAC,CACvBiC,MAAM,CAACH,KAAK,CAAC,CAAGC,KAAK,CACrB9B,MAAM,CAACgC,MAAM,CAAC,CAEd;AACA,GAAIF,KAAK,EAAID,KAAK,CAAG,CAAC,CAAE,KAAAI,kBAAA,CACpB,CAAAA,kBAAA,CAAAjB,SAAS,CAACM,OAAO,CAACO,KAAK,CAAG,CAAC,CAAC,UAAAI,kBAAA,iBAA5BA,kBAAA,CAA8BV,KAAK,CAAC,CAAC,CACzC,CACJ,CAAC,CAED,KAAM,CAAAW,aAAa,CAAGA,CAACL,KAAK,CAAEM,CAAC,GAAK,CAChC;AACA,GAAIA,CAAC,CAACC,GAAG,GAAK,WAAW,EAAI,CAACrC,GAAG,CAAC8B,KAAK,CAAC,EAAIA,KAAK,CAAG,CAAC,CAAE,KAAAQ,mBAAA,CACnD,CAAAA,mBAAA,CAAArB,SAAS,CAACM,OAAO,CAACO,KAAK,CAAG,CAAC,CAAC,UAAAQ,mBAAA,iBAA5BA,mBAAA,CAA8Bd,KAAK,CAAC,CAAC,CACzC,CAEA;AACA,GAAIY,CAAC,CAACC,GAAG,GAAK,OAAO,CAAE,CACnBE,eAAe,CAAC,CAAC,CACrB,CACJ,CAAC,CAED,KAAM,CAAAC,WAAW,CAAIJ,CAAC,EAAK,KAAAK,qBAAA,CACvBL,CAAC,CAACM,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,UAAU,CAAGP,CAAC,CAACQ,aAAa,CAACC,OAAO,CAAC,MAAM,CAAC,CAACvB,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,CAACwB,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CACjF,KAAM,CAAAb,MAAM,CAAG,CAAC,GAAGjC,GAAG,CAAC,CAEvB,IAAK,GAAI,CAAA+C,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG,CAAC,CAAEA,CAAC,EAAE,CAAE,CACxBd,MAAM,CAACc,CAAC,CAAC,CAAGJ,UAAU,CAACI,CAAC,CAAC,EAAI,EAAE,CACnC,CAEA9C,MAAM,CAACgC,MAAM,CAAC,CAEd;AACA,KAAM,CAAAe,eAAe,CAAGC,IAAI,CAACC,GAAG,CAACP,UAAU,CAACQ,MAAM,CAAG,CAAC,CAAE,CAAC,CAAC,CAC1D,CAAAV,qBAAA,CAAAxB,SAAS,CAACM,OAAO,CAACyB,eAAe,CAAC,UAAAP,qBAAA,iBAAlCA,qBAAA,CAAoCjB,KAAK,CAAC,CAAC,CAC/C,CAAC,CAED,KAAM,CAAAe,eAAe,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAa,SAAS,CAAGpD,GAAG,CAACqD,IAAI,CAAC,EAAE,CAAC,CAE9B,GAAID,SAAS,CAACD,MAAM,GAAK,CAAC,CAAE,CACxB9C,QAAQ,CAAC,2BAA2B,CAAC,CACrC,OACJ,CAEAF,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACA,KAAM,CAAAiD,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC7D,OAAO,CAAC,cAAc,CAAC,CAAE,CAClD8D,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjB1C,MAAM,CACNlB,GAAG,CAAEoD,SACT,CAAC,CACL,CAAC,CAAC,CAEF,KAAM,CAAAS,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAIR,QAAQ,CAACS,EAAE,EAAIF,IAAI,CAACvD,OAAO,CAAE,CAC7BC,UAAU,CAAC,6CAA6C,CAAC,CAEzD;AACA,GAAIsD,IAAI,CAACG,KAAK,CAAE,CACZC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEL,IAAI,CAACG,KAAK,CAAC,CAC7C,CAEA;AACAG,UAAU,CAAC,IAAM,KAAAC,eAAA,CAAAC,oBAAA,CACbvD,QAAQ,CAAC,EAAAsD,eAAA,CAAArD,QAAQ,CAACM,KAAK,UAAA+C,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBE,IAAI,UAAAD,oBAAA,iBAApBA,oBAAA,CAAsBE,QAAQ,GAAI,YAAY,CAAE,CAAEjD,OAAO,CAAE,IAAK,CAAC,CAAC,CAC/E,CAAC,CAAE,IAAI,CAAC,CACZ,CAAC,IAAM,KAAAkD,mBAAA,CACHnE,QAAQ,CAACwD,IAAI,CAACzD,KAAK,EAAI,qBAAqB,CAAC,CAC7C;AACAH,MAAM,CAAC,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAAC,CAChC,CAAAuE,mBAAA,CAAAvD,SAAS,CAACM,OAAO,CAAC,CAAC,CAAC,UAAAiD,mBAAA,iBAApBA,mBAAA,CAAsBhD,KAAK,CAAC,CAAC,CACjC,CACJ,CAAE,MAAOpB,KAAK,CAAE,CACZqE,OAAO,CAACrE,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3CC,QAAQ,CAAC,wCAAwC,CAAC,CACtD,CAAC,OAAS,CACNF,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAED,KAAM,CAAAuE,eAAe,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAAC9D,SAAS,EAAIJ,aAAa,CAAE,OAEjCC,gBAAgB,CAAC,IAAI,CAAC,CACtBJ,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACA,KAAM,CAAAiD,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC7D,OAAO,CAAC,qBAAqB,CAAC,CAAE,CACzD8D,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjB1C,MAAM,CACNC,KACJ,CAAC,CACL,CAAC,CAAC,CAEF,KAAM,CAAA0C,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAIR,QAAQ,CAACS,EAAE,EAAIF,IAAI,CAACvD,OAAO,CAAE,KAAAqE,oBAAA,CAC7BpE,UAAU,CAAC,2CAA2C,CAAC,CACvDM,YAAY,CAAC,KAAK,CAAC,CACnBF,iBAAiB,CAAC,EAAE,CAAC,CAAE;AACvB;AACAV,MAAM,CAAC,CAAC,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAAC,CAChC,CAAA0E,oBAAA,CAAA1D,SAAS,CAACM,OAAO,CAAC,CAAC,CAAC,UAAAoD,oBAAA,iBAApBA,oBAAA,CAAsBnD,KAAK,CAAC,CAAC,CAE7B;AACA2C,UAAU,CAAC,IAAM5D,UAAU,CAAC,EAAE,CAAC,CAAE,IAAI,CAAC,CAC1C,CAAC,IAAM,CACHF,QAAQ,CAACwD,IAAI,CAACzD,KAAK,EAAI,oCAAoC,CAAC,CAChE,CACJ,CAAE,MAAOA,KAAK,CAAE,CACZqE,OAAO,CAACrE,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACrCC,QAAQ,CAAC,oCAAoC,CAAC,CAClD,CAAC,OAAS,CACNI,gBAAgB,CAAC,KAAK,CAAC,CAC3B,CACJ,CAAC,CAED,GAAI,CAACS,MAAM,EAAI,CAACC,KAAK,CAAE,CACnB,MAAO,KAAI,CAAE;AACjB,CAEA,mBACIrB,KAAA,QAAK8E,SAAS,CAAC,iJAAiJ,CAAAC,QAAA,eAC5JjF,IAAA,QAAKgF,SAAS,CAAC,kCAAkC,CAAAC,QAAA,cAC7C/E,KAAA,QAAK8E,SAAS,CAAC,aAAa,CAAAC,QAAA,eACxBjF,IAAA,CAACJ,IAAI,EAACsF,EAAE,CAAC,GAAG,CAACF,SAAS,CAAC,iHAAiH,CAAAC,QAAA,CAAC,uBAEzI,CAAM,CAAC,cACPjF,IAAA,QAAKgF,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACvCjF,IAAA,OAAIgF,SAAS,CAAC,4DAA4D,CAAAC,QAAA,CAAC,mBAE3E,CAAI,CAAC,cACLjF,IAAA,MAAGgF,SAAS,CAAC,+CAA+C,CAAAC,QAAA,CAAC,2CAE7D,CAAG,CAAC,cACJjF,IAAA,MAAGgF,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CACtD1D,KAAK,CACP,CAAC,EACH,CAAC,CACL,CAAC,cAENvB,IAAA,QAAKgF,SAAS,CAAC,uCAAuC,CAAAC,QAAA,cAClD/E,KAAA,QAAK8E,SAAS,CAAC,+GAA+G,CAAAC,QAAA,eAC1H/E,KAAA,SAAMiF,QAAQ,CAAG3C,CAAC,EAAK,CAAEA,CAAC,CAACM,cAAc,CAAC,CAAC,CAAEH,eAAe,CAAC,CAAC,CAAE,CAAE,CAACqC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACpF/E,KAAA,QAAA+E,QAAA,eACIjF,IAAA,UAAOgF,SAAS,CAAC,6EAA6E,CAAAC,QAAA,CAAC,yBAE/F,CAAO,CAAC,cACRjF,IAAA,QAAKgF,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CACzC7E,GAAG,CAACgF,GAAG,CAAC,CAACC,KAAK,CAAEnD,KAAK,gBAClBlC,IAAA,UAEIsF,GAAG,CAAEC,EAAE,EAAIlE,SAAS,CAACM,OAAO,CAACO,KAAK,CAAC,CAAGqD,EAAG,CACzCC,IAAI,CAAC,MAAM,CACXC,SAAS,CAAC,GAAG,CACbtD,KAAK,CAAEkD,KAAM,CACbK,QAAQ,CAAGlD,CAAC,EAAKP,eAAe,CAACC,KAAK,CAAEM,CAAC,CAACmD,MAAM,CAACxD,KAAK,CAAE,CACxDyD,SAAS,CAAGpD,CAAC,EAAKD,aAAa,CAACL,KAAK,CAAEM,CAAC,CAAE,CAC1CqD,OAAO,CAAEjD,WAAY,CACrBoC,SAAS,CAAC,uMAAuM,CACjNc,QAAQ,CAAExF,OAAQ,EATb4B,KAUR,CACJ,CAAC,CACD,CAAC,EACL,CAAC,CAEL1B,KAAK,eACFR,IAAA,QAAKgF,SAAS,CAAC,uFAAuF,CAAAC,QAAA,cAClGjF,IAAA,QAAKgF,SAAS,CAAC,oDAAoD,CAAAC,QAAA,CAAEzE,KAAK,CAAM,CAAC,CAChF,CACR,CAEAE,OAAO,eACJV,IAAA,QAAKgF,SAAS,CAAC,+FAA+F,CAAAC,QAAA,cAC1GjF,IAAA,QAAKgF,SAAS,CAAC,wDAAwD,CAAAC,QAAA,CAAEvE,OAAO,CAAM,CAAC,CACtF,CACR,cAEDV,IAAA,QAAAiF,QAAA,cACIjF,IAAA,WACIwF,IAAI,CAAC,QAAQ,CACbM,QAAQ,CAAExF,OAAO,EAAIF,GAAG,CAACqD,IAAI,CAAC,EAAE,CAAC,CAACF,MAAM,GAAK,CAAE,CAC/CyB,SAAS,CAAC,4TAA4T,CAAAC,QAAA,CAErU3E,OAAO,cACJJ,KAAA,QAAK8E,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAC9BjF,IAAA,QAAKgF,SAAS,CAAC,4CAA4C,CAAAC,QAAA,cACvD/E,KAAA,QAAK8E,SAAS,CAAC,iCAAiC,CAACe,KAAK,CAAC,4BAA4B,CAACC,IAAI,CAAC,MAAM,CAACC,OAAO,CAAC,WAAW,CAAAhB,QAAA,eAC/GjF,IAAA,WAAQgF,SAAS,CAAC,YAAY,CAACkB,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAAS,CAAC,cACrGtG,IAAA,SAAMgF,SAAS,CAAC,YAAY,CAACgB,IAAI,CAAC,cAAc,CAACO,CAAC,CAAC,iHAAiH,CAAO,CAAC,EAC3K,CAAC,CACL,CAAC,eAEV,EAAK,CAAC,CAEN,cACH,CACG,CAAC,CACR,CAAC,cAENvG,IAAA,QAAKgF,SAAS,CAAC,aAAa,CAAAC,QAAA,cACxB/E,KAAA,MAAG8E,SAAS,CAAC,0CAA0C,CAAAC,QAAA,EAAC,0BAC5B,CAAC,GAAG,cAC5BjF,IAAA,WACIwF,IAAI,CAAC,QAAQ,CACbgB,OAAO,CAAE1B,eAAgB,CACzBgB,QAAQ,CAAE,CAAC9E,SAAS,EAAIJ,aAAc,CACtCoE,SAAS,CAAC,2IAA2I,CAAAC,QAAA,CAEpJrE,aAAa,CAAG,YAAY,CAC5BE,cAAc,CAAG,CAAC,cAAA2F,MAAA,CAAgB3F,cAAc,MAChD,aAAa,CACV,CAAC,EACV,CAAC,CACH,CAAC,EACJ,CAAC,cAEPd,IAAA,QAAKgF,SAAS,CAAC,yDAAyD,CAAAC,QAAA,cACpE/E,KAAA,QAAK8E,SAAS,CAAC,gEAAgE,CAAAC,QAAA,eAC3EjF,IAAA,QAAAiF,QAAA,CAAK,2DAA+C,CAAK,CAAC,cAC1DjF,IAAA,QAAAiF,QAAA,CAAK,gEAAoD,CAAK,CAAC,EAC9D,CAAC,CACL,CAAC,EACL,CAAC,CACL,CAAC,EACL,CAAC,CAEd,CAEA,cAAe,CAAA9E,qBAAqB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}