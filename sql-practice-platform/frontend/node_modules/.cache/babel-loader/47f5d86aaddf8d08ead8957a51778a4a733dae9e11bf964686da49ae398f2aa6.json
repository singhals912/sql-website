{"ast":null,"code":"import React,{useState,useEffect}from'react';import{createPortal}from'react-dom';import{bookmarksUrl}from'../config/environment';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BookmarkButton=_ref=>{let{problemId,size='md',className=''}=_ref;const[isBookmarked,setIsBookmarked]=useState(false);const[bookmarkType,setBookmarkType]=useState(null);const[showDropdown,setShowDropdown]=useState(false);const[loading,setLoading]=useState(false);const[buttonPosition,setButtonPosition]=useState({top:0,left:0});const toggleBookmark=buttonElement=>{if(isBookmarked){removeBookmark();}else{// Calculate button position for dropdown placement\nif(buttonElement){const rect=buttonElement.getBoundingClientRect();setButtonPosition({top:rect.bottom,left:rect.left});}setShowDropdown(!showDropdown);}};// Get session ID (same logic as other components)\nconst getSessionId=()=>{let sessionId=localStorage.getItem('sql_practice_session_id');if(!sessionId){sessionId=\"session_\".concat(Date.now(),\"_\").concat(Math.random().toString(36).substr(2,9));localStorage.setItem('sql_practice_session_id',sessionId);}return sessionId;};// Check if problem is already bookmarked when component loads\nuseEffect(()=>{const checkBookmarkStatus=async()=>{if(!problemId){console.log('No problemId provided, skipping bookmark check');return;}try{const sessionId=getSessionId();const response=await fetch(bookmarksUrl(\"check/\".concat(problemId)),{headers:{'X-Session-ID':sessionId}});if(response.ok){const data=await response.json();setIsBookmarked(data.bookmarked);setBookmarkType(data.bookmarkType);}else{console.error('Failed to check bookmark status:',response.status);}}catch(error){console.error('Error checking bookmark status:',error);}};if(problemId){checkBookmarkStatus();}},[problemId]);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{// Check if click is outside both the button and dropdown\nif(showDropdown&&!event.target.closest('.bookmark-dropdown')&&!event.target.closest('button')){setShowDropdown(false);}};document.addEventListener('click',handleClickOutside);return()=>document.removeEventListener('click',handleClickOutside);},[showDropdown]);// Early return if no problemId (after hooks)\nif(!problemId){return/*#__PURE__*/_jsx(\"div\",{className:\"relative \".concat(className),children:/*#__PURE__*/_jsx(\"button\",{className:\"w-10 h-10 flex items-center justify-center rounded-full border-2 border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed\",disabled:true,title:\"Problem ID not available\",children:\"\\uD83D\\uDD16\"})});}const handleBookmark=async type=>{if(loading)return;setLoading(true);try{const sessionId=getSessionId();// Add bookmark\nconst response=await fetch(bookmarksUrl(problemId),{method:'POST',headers:{'Content-Type':'application/json','X-Session-ID':sessionId},body:JSON.stringify({bookmarkType:type})});if(response.ok){const data=await response.json();setIsBookmarked(true);setBookmarkType(type);}else{const errorData=await response.json().catch(()=>({}));console.error('Bookmark failed:',response.status,errorData);}}catch(error){console.error('Error adding bookmark:',error);}finally{setLoading(false);setShowDropdown(false);}};const getSize=()=>{switch(size){case'sm':return'w-8 h-8 text-sm';case'md':return'w-10 h-10 text-base';case'lg':return'w-12 h-12 text-lg';default:return'w-10 h-10 text-base';}};const getBookmarkIcon=()=>{if(!isBookmarked)return'üîñ';switch(bookmarkType){case'favorite':return'‚≠ê';case'review_later':return'üìö';case'challenging':return'üî•';default:return'‚≠ê';}};const removeBookmark=async()=>{console.log('removeBookmark called');if(loading)return;setLoading(true);try{const sessionId=getSessionId();console.log('Removing bookmark:',{problemId,sessionId});const response=await fetch(bookmarksUrl(problemId),{method:'DELETE',headers:{'X-Session-ID':sessionId}});console.log('Remove bookmark response status:',response.status);if(response.ok){const data=await response.json();console.log('Remove bookmark response data:',data);setIsBookmarked(false);setBookmarkType(null);console.log('Bookmark state updated:',{isBookmarked:false,bookmarkType:null});}else{const errorData=await response.json().catch(()=>({}));console.error('Remove bookmark failed:',response.status,errorData);}}catch(error){console.error('Error removing bookmark:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative \".concat(className),style:{zIndex:showDropdown?9999:'auto'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();// Prevent event bubbling\ntoggleBookmark(e.currentTarget);},disabled:loading,className:\"\\n          \".concat(getSize(),\"\\n          flex items-center justify-center\\n          rounded-full border-2 transition-all duration-200\\n          cursor-pointer relative\\n          \").concat(loading?'bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed':isBookmarked?'bg-blue-100 border-blue-500 text-blue-600 hover:bg-blue-200':'bg-gray-100 border-gray-300 text-gray-500 hover:bg-gray-200',\"\\n          \").concat(!loading&&'hover:scale-105',\"\\n        \"),title:isBookmarked?\"Remove \".concat(bookmarkType,\" bookmark\"):\"Bookmark this problem\",style:{pointerEvents:loading?'none':'auto',zIndex:showDropdown?10000:10},children:loading?'‚è≥':getBookmarkIcon()}),showDropdown&&!isBookmarked&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,zIndex:999998,backgroundColor:'transparent',pointerEvents:'all'},onClick:()=>setShowDropdown(false)}),/*#__PURE__*/_jsx(\"div\",{className:\"bookmark-dropdown w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-xl\",style:{position:'fixed',zIndex:999999,top:buttonPosition.top+8,left:Math.max(0,buttonPosition.left-192+40),// Align right edge, with padding\npointerEvents:'all'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();handleBookmark('favorite');},disabled:loading,className:\"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2\",style:{pointerEvents:'all'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u2B50\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Favorite\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();handleBookmark('review_later');},disabled:loading,className:\"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2\",style:{pointerEvents:'all'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCDA\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Review Later\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();handleBookmark('challenging');},disabled:loading,className:\"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2\",style:{pointerEvents:'all'},children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDD25\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Challenging\"})]})]})})]}),document.body)]});};export default BookmarkButton;","map":{"version":3,"names":["React","useState","useEffect","createPortal","bookmarksUrl","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BookmarkButton","_ref","problemId","size","className","isBookmarked","setIsBookmarked","bookmarkType","setBookmarkType","showDropdown","setShowDropdown","loading","setLoading","buttonPosition","setButtonPosition","top","left","toggleBookmark","buttonElement","removeBookmark","rect","getBoundingClientRect","bottom","getSessionId","sessionId","localStorage","getItem","concat","Date","now","Math","random","toString","substr","setItem","checkBookmarkStatus","console","log","response","fetch","headers","ok","data","json","bookmarked","error","status","handleClickOutside","event","target","closest","document","addEventListener","removeEventListener","children","disabled","title","handleBookmark","type","method","body","JSON","stringify","errorData","catch","getSize","getBookmarkIcon","style","zIndex","onClick","e","stopPropagation","currentTarget","pointerEvents","position","right","backgroundColor","max"],"sources":["/Users/ss/Downloads/Code/Vibe_coding/SQL_practice_website/sql-practice-platform/frontend/src/components/BookmarkButton.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { bookmarksUrl } from '../config/environment';\n\nconst BookmarkButton = ({ problemId, size = 'md', className = '' }) => {\n  const [isBookmarked, setIsBookmarked] = useState(false);\n  const [bookmarkType, setBookmarkType] = useState(null);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [buttonPosition, setButtonPosition] = useState({ top: 0, left: 0 });\n\n\n  const toggleBookmark = (buttonElement) => {\n    if (isBookmarked) {\n      removeBookmark();\n    } else {\n      // Calculate button position for dropdown placement\n      if (buttonElement) {\n        const rect = buttonElement.getBoundingClientRect();\n        setButtonPosition({\n          top: rect.bottom,\n          left: rect.left\n        });\n      }\n      setShowDropdown(!showDropdown);\n    }\n  };\n\n  // Get session ID (same logic as other components)\n  const getSessionId = () => {\n    let sessionId = localStorage.getItem('sql_practice_session_id');\n    if (!sessionId) {\n      sessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n      localStorage.setItem('sql_practice_session_id', sessionId);\n    }\n    return sessionId;\n  };\n\n  // Check if problem is already bookmarked when component loads\n  useEffect(() => {\n    const checkBookmarkStatus = async () => {\n      if (!problemId) {\n        console.log('No problemId provided, skipping bookmark check');\n        return;\n      }\n\n      try {\n        const sessionId = getSessionId();\n        \n        const response = await fetch(bookmarksUrl(`check/${problemId}`), {\n          headers: {\n            'X-Session-ID': sessionId\n          }\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          setIsBookmarked(data.bookmarked);\n          setBookmarkType(data.bookmarkType);\n        } else {\n          console.error('Failed to check bookmark status:', response.status);\n        }\n      } catch (error) {\n        console.error('Error checking bookmark status:', error);\n      }\n    };\n\n    if (problemId) {\n      checkBookmarkStatus();\n    }\n  }, [problemId]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      // Check if click is outside both the button and dropdown\n      if (showDropdown && \n          !event.target.closest('.bookmark-dropdown') && \n          !event.target.closest('button')) {\n        setShowDropdown(false);\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n    return () => document.removeEventListener('click', handleClickOutside);\n  }, [showDropdown]);\n\n  // Early return if no problemId (after hooks)\n  if (!problemId) {\n    return (\n      <div className={`relative ${className}`}>\n        <button \n          className=\"w-10 h-10 flex items-center justify-center rounded-full border-2 border-gray-300 bg-gray-100 text-gray-400 cursor-not-allowed\"\n          disabled\n          title=\"Problem ID not available\"\n        >\n          üîñ\n        </button>\n      </div>\n    );\n  }\n\n  const handleBookmark = async (type) => {\n    if (loading) return;\n    \n    setLoading(true);\n    try {\n      const sessionId = getSessionId();\n      \n      // Add bookmark\n      const response = await fetch(bookmarksUrl(problemId), {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Session-ID': sessionId\n        },\n        body: JSON.stringify({\n          bookmarkType: type\n        })\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        setIsBookmarked(true);\n        setBookmarkType(type);\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('Bookmark failed:', response.status, errorData);\n      }\n    } catch (error) {\n      console.error('Error adding bookmark:', error);\n    } finally {\n      setLoading(false);\n      setShowDropdown(false);\n    }\n  };\n\n  const getSize = () => {\n    switch (size) {\n      case 'sm': return 'w-8 h-8 text-sm';\n      case 'md': return 'w-10 h-10 text-base';\n      case 'lg': return 'w-12 h-12 text-lg';\n      default: return 'w-10 h-10 text-base';\n    }\n  };\n\n  const getBookmarkIcon = () => {\n    if (!isBookmarked) return 'üîñ';\n    switch (bookmarkType) {\n      case 'favorite': return '‚≠ê';\n      case 'review_later': return 'üìö';\n      case 'challenging': return 'üî•';\n      default: return '‚≠ê';\n    }\n  };\n\n  const removeBookmark = async () => {\n    console.log('removeBookmark called');\n    if (loading) return;\n    \n    setLoading(true);\n    try {\n      const sessionId = getSessionId();\n      console.log('Removing bookmark:', { problemId, sessionId });\n      \n      const response = await fetch(bookmarksUrl(problemId), {\n        method: 'DELETE',\n        headers: {\n          'X-Session-ID': sessionId\n        }\n      });\n      \n      console.log('Remove bookmark response status:', response.status);\n      \n      if (response.ok) {\n        const data = await response.json();\n        console.log('Remove bookmark response data:', data);\n        setIsBookmarked(false);\n        setBookmarkType(null);\n        console.log('Bookmark state updated:', { isBookmarked: false, bookmarkType: null });\n      } else {\n        const errorData = await response.json().catch(() => ({}));\n        console.error('Remove bookmark failed:', response.status, errorData);\n      }\n    } catch (error) {\n      console.error('Error removing bookmark:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className={`relative ${className}`} style={{ zIndex: showDropdown ? 9999 : 'auto' }}>\n      <button\n        onClick={(e) => {\n          e.stopPropagation(); // Prevent event bubbling\n          toggleBookmark(e.currentTarget);\n        }}\n        disabled={loading}\n        className={`\n          ${getSize()}\n          flex items-center justify-center\n          rounded-full border-2 transition-all duration-200\n          cursor-pointer relative\n          ${loading \n            ? 'bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed'\n            : isBookmarked \n              ? 'bg-blue-100 border-blue-500 text-blue-600 hover:bg-blue-200' \n              : 'bg-gray-100 border-gray-300 text-gray-500 hover:bg-gray-200'\n          }\n          ${!loading && 'hover:scale-105'}\n        `}\n        title={isBookmarked ? `Remove ${bookmarkType} bookmark` : \"Bookmark this problem\"}\n        style={{ \n          pointerEvents: loading ? 'none' : 'auto',\n          zIndex: showDropdown ? 10000 : 10\n        }}\n      >\n        {loading ? '‚è≥' : getBookmarkIcon()}\n      </button>\n\n      {showDropdown && !isBookmarked && createPortal(\n        <>\n          {/* Transparent backdrop to close dropdown */}\n          <div \n            style={{\n              position: 'fixed',\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              zIndex: 999998,\n              backgroundColor: 'transparent',\n              pointerEvents: 'all'\n            }}\n            onClick={() => setShowDropdown(false)}\n          />\n          \n          {/* Dropdown menu positioned near button */}\n          <div \n            className=\"bookmark-dropdown w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-xl\"\n            style={{\n              position: 'fixed',\n              zIndex: 999999,\n              top: buttonPosition.top + 8,\n              left: Math.max(0, buttonPosition.left - 192 + 40), // Align right edge, with padding\n              pointerEvents: 'all'\n            }}\n          >\n            <div className=\"p-2\">\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleBookmark('favorite');\n                }}\n                disabled={loading}\n                className=\"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2\"\n                style={{ pointerEvents: 'all' }}\n              >\n                <span>‚≠ê</span>\n                <span>Favorite</span>\n              </button>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleBookmark('review_later');\n                }}\n                disabled={loading}\n                className=\"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2\"\n                style={{ pointerEvents: 'all' }}\n              >\n                <span>üìö</span>\n                <span>Review Later</span>\n              </button>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleBookmark('challenging');\n                }}\n                disabled={loading}\n                className=\"w-full text-left px-3 py-2 rounded-md text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 transition-colors flex items-center gap-2\"\n                style={{ pointerEvents: 'all' }}\n              >\n                <span>üî•</span>\n                <span>Challenging</span>\n              </button>\n            </div>\n          </div>\n        </>,\n        document.body\n      )}\n      \n    </div>\n  );\n};\n\nexport default BookmarkButton;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}